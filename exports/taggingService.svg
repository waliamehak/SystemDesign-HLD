<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15856.572392324379 12188.761474057028" width="15856.572392324379" height="12188.761474057028"><!-- svg-source:excalidraw --><metadata></metadata><defs><style class="style-fonts">
      @font-face { font-family: Excalifont; src: url(data:font/woff2;base64,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); }</style></defs><rect x="0" y="0" width="15856.572392324379" height="12188.761474057028" fill="#ffffff"></rect><g transform="translate(1419.2285841885714 10) rotate(0 906.1795043945312 99.07811896537169)"><text x="0" y="139.66051649358815" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="158.52499034459495px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DEsign tagging serrvice</text></g><g transform="translate(1412.30010454695 301.7327509609022) rotate(0 1390.7872314453125 652.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. We want to build a system that allows users to tag content for different products, and then to view content by tags. </text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">A goal of this system is that it should be built on a product-agnostic way, so that we could add new products in the future without a large amount of work.</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">**Functional requirements:**</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. User can add/delete a tag/list of tags to any entity.</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. User can update/rename a tag and keep associations.</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. User can fetch all entities attached to the tag.</text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. User can fetch all the tags for a post/entity.</text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">------out of scope for now---------</text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. user can see a dashboard of top-k global trending tags. Identify the top 10 hashtags globally (across all customers) with the most tagged entities</text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. user can see popular tags by tenant/product</text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">7. users can search tags by name/prefix (this will cover autocommplete?)</text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">8. user can only view entities (when they search by tag) they are allowed to see.</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">9. user/admin can register a new products without chaning anything. </text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1021.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1066.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">**Non-functional requirements:**</text><text x="0" y="1111.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. System is highly available over strongly consistent, its okay if we dont see post reflected by a tag immediately.</text><text x="0" y="1156.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1201.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">                       2. Hashtags are dynamic, with no pre-defined set, meaning users can create any tag.</text><text x="0" y="1246.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. (scale: 100 Million tag requests a day) 10 M create tags say 1B read tags (fetch entities to the post)</text><text x="0" y="1291.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g transform="translate(1453.8390320634144 1723.1290365961831) rotate(0 157.62594604492188 90)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Core entities:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. Tags</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Entities (post)</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. Users.</text></g><g stroke-linecap="round" transform="translate(1248.7433543850066 3573.33531485431) rotate(0 148.59800161520207 69.8276265854729)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.91 40.54 C10.23 29.86, 21.11 16.02, 36.34 -0.21 M0.91 40.54 C13.55 26.15, 24.98 11.4, 36.34 -0.21 M1.18 64.62 C19.77 44.1, 35.28 24.5, 57.6 -0.28 M1.18 64.62 C21.21 41.26, 41.78 18.89, 57.6 -0.28 M1.44 88.71 C21.79 67.24, 37.16 43.28, 78.2 0.41 M1.44 88.71 C29.37 56.39, 57.7 24.54, 78.2 0.41 M1.05 113.54 C37.62 73.98, 71.5 32.74, 99.46 0.34 M1.05 113.54 C25.13 88.03, 47.66 61.56, 99.46 0.34 M7.88 130.08 C48.12 83.68, 87.59 37.88, 120.72 0.27 M7.88 130.08 C47.59 82.95, 88.24 37.63, 120.72 0.27 M21.92 138.31 C55.56 98.44, 89.83 60.8, 141.98 0.2 M21.92 138.31 C52.71 102.19, 83.8 66.57, 141.98 0.2 M41.87 139.75 C88.15 86.13, 134.58 32.71, 163.24 0.13 M41.87 139.75 C80.65 95.75, 117.74 51.24, 163.24 0.13 M63.13 139.68 C95.91 101.19, 127.24 68.2, 184.5 0.06 M63.13 139.68 C105.56 91.43, 145.71 43.71, 184.5 0.06 M83.74 140.37 C112.47 107.59, 146.04 70.06, 205.76 -0.01 M83.74 140.37 C125.08 94.44, 165.83 46.26, 205.76 -0.01 M105 140.3 C136.14 101.39, 164.89 67.22, 227.02 -0.08 M105 140.3 C136.25 103.92, 168.72 69.03, 227.02 -0.08 M126.26 140.23 C162.78 100.84, 199.2 57.81, 248.28 -0.15 M126.26 140.23 C171.13 89.01, 215.76 37.63, 248.28 -0.15 M147.52 140.16 C188.16 97.42, 225.97 53.44, 268.89 0.54 M147.52 140.16 C195.61 85.35, 243.15 31.1, 268.89 0.54 M168.78 140.09 C212.32 89.17, 258.59 35.79, 285.56 5.75 M168.78 140.09 C201.58 100.38, 237.68 62.51, 285.56 5.75 M190.04 140.02 C216.1 108.32, 244.97 76.5, 295.66 18.51 M190.04 140.02 C212.98 113.54, 234.42 87.12, 295.66 18.51 M211.3 139.95 C231.9 118.24, 250.71 96.89, 297.9 40.33 M211.3 139.95 C233.85 115.34, 256.24 88.07, 297.9 40.33 M232.56 139.88 C244.93 124.9, 260.39 108.83, 298.16 64.41 M232.56 139.88 C245.92 124.71, 259.74 108.72, 298.16 64.41 M253.82 139.82 C265.13 127.12, 276.53 112.43, 297.77 89.25 M253.82 139.82 C267.36 123.39, 282.28 106.81, 297.77 89.25 M276.39 138.24 C281.84 132.12, 288.8 126.06, 296.73 114.84 M276.39 138.24 C282.06 130.75, 288.41 123.34, 296.73 114.84" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C102.01 -0.27, 169.74 -2.02, 265.2 0 M32 0 C117.91 -0.84, 201.98 -1.41, 265.2 0 M265.2 0 C285.87 -1.92, 297.5 9.87, 297.2 32 M265.2 0 C287.29 -1, 298.63 10.18, 297.2 32 M297.2 32 C295.99 51.62, 297.24 70.38, 297.2 107.66 M297.2 32 C297.77 60.77, 296.3 89.63, 297.2 107.66 M297.2 107.66 C298.94 130.47, 287.14 140.47, 265.2 139.66 M297.2 107.66 C298.13 127.46, 287.68 140.18, 265.2 139.66 M265.2 139.66 C178.98 139.37, 88.48 138.54, 32 139.66 M265.2 139.66 C188.83 138.37, 111.26 138.54, 32 139.66 M32 139.66 C10.35 139.22, -0.45 128.28, 0 107.66 M32 139.66 C10.51 141.83, -1.22 128.61, 0 107.66 M0 107.66 C-1.36 84.6, -0.03 61.33, 0 32 M0 107.66 C0.16 81.54, 0.15 55.66, 0 32 M0 32 C-0.2 12.58, 9.22 0.67, 32 0 M0 32 C0.01 11.09, 12.9 1.6, 32 0" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1348.489373883509 3620.662941439783) rotate(0 48.85198211669922 22.5)"><text x="48.85198211669922" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Client</text></g><g stroke-linecap="round" transform="translate(1767.8739117751556 3204.1461764465566) rotate(0 101.5984447691576 464.6319244944352)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.26 41.3 C7.18 30.59, 17.55 24.84, 36.34 -0.21 M0.26 41.3 C8.23 31.76, 18.07 21.51, 36.34 -0.21 M0.52 65.38 C18.41 48.2, 30.09 27.91, 56.94 0.47 M0.52 65.38 C16.89 46.81, 32.22 29.86, 56.94 0.47 M0.13 90.22 C24.9 62.06, 51.71 34.02, 78.2 0.41 M0.13 90.22 C17.58 69.76, 35.56 49.31, 78.2 0.41 M0.4 114.3 C34.33 76.15, 70.83 35.54, 99.46 0.34 M0.4 114.3 C32.36 77.41, 64.52 40.35, 99.46 0.34 M0.01 139.13 C42.67 89.83, 84.12 43.37, 120.72 0.27 M0.01 139.13 C27.07 105.35, 54.91 74.75, 120.72 0.27 M0.27 163.22 C55.66 97.09, 112.46 33.55, 141.98 0.2 M0.27 163.22 C46.75 110.71, 92.23 57, 141.98 0.2 M0.54 187.3 C46.39 135.88, 93.27 82.74, 162.59 0.88 M0.54 187.3 C57.78 121.73, 115.89 56.05, 162.59 0.88 M0.15 212.13 C42.46 162.69, 84.75 116.31, 183.19 1.57 M0.15 212.13 C73.84 129.53, 146.3 46.75, 183.19 1.57 M0.42 236.22 C52.72 177.58, 103.53 118.84, 197.24 9.8 M0.42 236.22 C54.47 172.85, 108.18 111.18, 197.24 9.8 M0.03 261.05 C73.26 177.82, 147.1 94.67, 202.75 27.85 M0.03 261.05 C63.21 187.76, 125.82 115.32, 202.75 27.85 M0.29 285.13 C49.8 226.36, 102.72 166.22, 203.02 51.93 M0.29 285.13 C75 200, 149.58 115.04, 203.02 51.93 M0.56 309.22 C61.67 235.46, 124.88 162.4, 202.63 76.76 M0.56 309.22 C74.29 225.87, 148.54 140.09, 202.63 76.76 M0.17 334.05 C77.67 243.11, 154.59 153.56, 202.89 100.85 M0.17 334.05 C73.65 247.57, 148.94 161.14, 202.89 100.85 M0.44 358.13 C56.74 291.18, 115.69 224.34, 203.16 124.93 M0.44 358.13 C57.65 291.7, 115.39 224.57, 203.16 124.93 M0.7 382.21 C45.4 333.78, 87.11 283.05, 202.77 149.76 M0.7 382.21 C65.39 304.91, 131.34 229.39, 202.77 149.76 M0.31 407.05 C53.99 345.27, 106.61 282.89, 203.04 173.85 M0.31 407.05 C67.39 330.69, 135.75 251.46, 203.04 173.85 M0.58 431.13 C51.95 377.11, 98.89 320.43, 203.3 197.93 M0.58 431.13 C49.4 374.37, 99.29 317.25, 203.3 197.93 M0.19 455.97 C71 377.04, 139.86 294.87, 202.91 222.76 M0.19 455.97 C42.42 406.85, 84.39 358.67, 202.91 222.76 M0.46 480.05 C43.48 428.05, 86.22 380.3, 203.18 246.85 M0.46 480.05 C47.52 427.47, 95.28 373.18, 203.18 246.85 M0.72 504.13 C41.09 458.35, 81.1 411.62, 202.79 271.68 M0.72 504.13 C65.58 428.11, 132.79 351.51, 202.79 271.68 M0.33 528.97 C43.47 476.99, 86.24 427.23, 203.05 295.76 M0.33 528.97 C72.53 445.48, 146.15 362.32, 203.05 295.76 M0.6 553.05 C43.45 504.95, 84.87 458.43, 203.32 319.85 M0.6 553.05 C74.5 469.27, 147.18 386.92, 203.32 319.85 M0.21 577.89 C74.41 490.93, 151.39 402.05, 202.93 344.68 M0.21 577.89 C79.37 487.58, 158.17 395.87, 202.93 344.68 M0.48 601.97 C63.86 527, 128.09 454.61, 203.2 368.76 M0.48 601.97 C59.13 534.44, 116.94 467.48, 203.2 368.76 M0.74 626.05 C74.44 541.01, 150.25 454.62, 202.81 393.6 M0.74 626.05 C55.17 561.22, 111.37 496.24, 202.81 393.6 M0.35 650.89 C79.3 560.76, 159.72 470.81, 203.07 417.68 M0.35 650.89 C69.7 571.59, 140.15 491.18, 203.07 417.68 M0.62 674.97 C63.34 605.72, 125.8 532.92, 203.34 441.76 M0.62 674.97 C50.8 615.97, 100.72 557.95, 203.34 441.76 M0.88 699.05 C54.08 635.89, 110.59 574.03, 202.95 466.6 M0.88 699.05 C58.59 633.44, 116.54 568.35, 202.95 466.6 M0.49 723.89 C49.11 668.58, 98.22 611.53, 203.22 490.68 M0.49 723.89 C63.85 651.15, 126.08 578.27, 203.22 490.68 M0.76 747.97 C64.24 675.27, 125.82 603.78, 203.48 514.76 M0.76 747.97 C59.87 677.28, 120.68 607.43, 203.48 514.76 M0.37 772.81 C57.42 709.35, 114.15 645.31, 203.09 539.6 M0.37 772.81 C76.33 688.43, 150.45 602.88, 203.09 539.6 M0.64 796.89 C45.82 746.09, 91.38 696.25, 203.36 563.68 M0.64 796.89 C66.19 722.24, 129.38 647.72, 203.36 563.68 M0.9 820.97 C50.8 765.52, 100.88 708.17, 202.97 588.52 M0.9 820.97 C59.83 754.67, 118.62 688.25, 202.97 588.52 M0.51 845.81 C46.94 789.78, 96.42 735.48, 203.24 612.6 M0.51 845.81 C58.74 778.03, 117.17 710.19, 203.24 612.6 M0.78 869.89 C49.33 814.49, 97.96 757.4, 203.5 636.68 M0.78 869.89 C48.25 814.49, 96.12 759.94, 203.5 636.68 M0.39 894.72 C75.86 805.96, 152.94 718.84, 203.11 661.52 M0.39 894.72 C63.58 824.06, 124.8 752.99, 203.11 661.52 M3.94 915.03 C56.99 852.7, 111.72 791.45, 203.38 685.6 M3.94 915.03 C74.88 833.27, 145.35 752.03, 203.38 685.6 M15.36 926.28 C81.02 852.41, 144.83 777.35, 202.99 710.44 M15.36 926.28 C68.76 863.28, 122.84 799.95, 202.99 710.44 M33.99 929.23 C68.31 886.19, 106.28 845.01, 203.26 734.52 M33.99 929.23 C82.16 876.45, 128.15 823.16, 203.26 734.52 M55.25 929.16 C92.39 890.37, 126.93 848.76, 203.52 758.6 M55.25 929.16 C100.43 879.58, 144.36 828.88, 203.52 758.6 M76.51 929.1 C113.43 886.08, 148.76 848.36, 203.13 783.44 M76.51 929.1 C126.97 870.77, 176.05 812.61, 203.13 783.44 M97.77 929.03 C124.58 897.66, 149.84 869.14, 203.4 807.52 M97.77 929.03 C119.79 901.88, 143.05 876.73, 203.4 807.52 M119.03 928.96 C146.04 896.15, 171.14 868.27, 203.66 831.6 M119.03 928.96 C137.43 907.62, 156.66 886.78, 203.66 831.6 M140.29 928.89 C164.96 900.49, 186.63 876.43, 203.28 856.44 M140.29 928.89 C156.21 908.73, 171.77 891.02, 203.28 856.44 M161.55 928.82 C175.76 915.32, 188.89 900.67, 203.54 880.52 M161.55 928.82 C170.88 918.14, 179.73 908.24, 203.54 880.52 M184.13 927.24 C188.89 922.1, 196.07 916.01, 203.15 905.35 M184.13 927.24 C189.54 920.22, 196.01 913.8, 203.15 905.35" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C88.18 -2.38, 143.14 -0.05, 171.2 0 M32 0 C79.43 -1.41, 127.44 -0.07, 171.2 0 M171.2 0 C190.77 1.08, 202.46 10.16, 203.2 32 M171.2 0 C193.42 0.43, 201.87 9.81, 203.2 32 M203.2 32 C204.93 366.49, 206.16 702.13, 203.2 897.26 M203.2 32 C201.71 248.9, 201.96 466.23, 203.2 897.26 M203.2 897.26 C202.7 919.99, 193.67 928.94, 171.2 929.26 M203.2 897.26 C204.17 916.98, 190.63 929.27, 171.2 929.26 M171.2 929.26 C121.75 930.94, 73.74 929.81, 32 929.26 M171.2 929.26 C116.38 931.15, 63.53 929.88, 32 929.26 M32 929.26 C9.42 927.48, -1.61 920.13, 0 897.26 M32 929.26 C10.25 927.35, -1.08 917.04, 0 897.26 M0 897.26 C1.27 703.37, 1.5 508.85, 0 32 M0 897.26 C-1.54 674.31, -2.08 451.5, 0 32 M0 32 C-0.94 10.2, 9.64 0.35, 32 0 M0 32 C1.24 10.85, 12.9 1.05, 32 0" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1780.8043801649192 3623.778100940988) rotate(0 88.66797637939453 45)"><text x="88.66797637939453" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">API</text><text x="88.66797637939453" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">GATEWAY</text></g><g stroke-linecap="round" transform="translate(2486.5019481924874 3889.0499959871304) rotate(0 162.28782560694071 81.8030896086384)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.91 40.54 C8.51 32.13, 19.03 20.18, 36.34 -0.21 M0.91 40.54 C9.46 29.79, 16.97 20.14, 36.34 -0.21 M1.18 64.62 C21.21 44.38, 39.45 22.26, 57.6 -0.28 M1.18 64.62 C14.62 49.81, 28.82 32.9, 57.6 -0.28 M1.44 88.71 C28.83 58.07, 58.13 24.51, 78.2 0.41 M1.44 88.71 C25.14 61.43, 47.98 33.37, 78.2 0.41 M1.05 113.54 C31.16 80.33, 58.54 43.25, 99.46 0.34 M1.05 113.54 C35.75 72.96, 71.82 32.76, 99.46 0.34 M1.32 137.62 C38.08 94.98, 76.75 50.66, 120.72 0.27 M1.32 137.62 C29.79 104.3, 58.02 71.95, 120.72 0.27 M8.15 154.16 C58.22 97.32, 109.58 39.71, 141.98 0.2 M8.15 154.16 C55.15 99.06, 102.82 45.39, 141.98 0.2 M22.19 162.39 C60.24 118.6, 96.8 74.2, 163.24 0.13 M22.19 162.39 C73.71 102.24, 124.66 41.53, 163.24 0.13 M42.14 163.83 C93.45 104.74, 146.79 43.6, 184.5 0.06 M42.14 163.83 C75.12 125.78, 107.6 87.41, 184.5 0.06 M63.4 163.76 C100.9 122.35, 135.48 80.36, 205.76 -0.01 M63.4 163.76 C99.75 122.9, 134.86 81.39, 205.76 -0.01 M84 164.45 C117.26 123.68, 155.43 83.61, 227.02 -0.08 M84 164.45 C131.86 107.43, 179.97 51.57, 227.02 -0.08 M105.26 164.38 C145.79 116.41, 188.28 69.23, 248.28 -0.15 M105.26 164.38 C147.73 114.53, 192.38 63.59, 248.28 -0.15 M126.52 164.31 C154.64 127.89, 187.43 92.53, 269.54 -0.22 M126.52 164.31 C165.36 120.08, 204.8 75.12, 269.54 -0.22 M147.78 164.24 C185.07 118.79, 225.99 74.45, 290.8 -0.28 M147.78 164.24 C199.19 102.22, 253.47 41.7, 290.8 -0.28 M169.04 164.17 C225.27 101.57, 280.42 35.03, 308.78 3.42 M169.04 164.17 C220.42 104.86, 271.97 44.81, 308.78 3.42 M190.3 164.1 C227.59 122.63, 265.12 77.61, 320.86 13.92 M190.3 164.1 C236.43 111.07, 283.3 56.25, 320.86 13.92 M211.56 164.03 C250.19 116.54, 291.4 72.9, 325.06 33.47 M211.56 164.03 C255.99 111.85, 299.88 60.13, 325.06 33.47 M232.82 163.97 C260.7 131.35, 290.27 98.73, 324.67 58.31 M232.82 163.97 C268.02 124.33, 302.27 83.83, 324.67 58.31 M254.08 163.9 C282.12 133.29, 305.83 102.42, 324.94 82.39 M254.08 163.9 C273.51 141.66, 292.88 120.53, 324.94 82.39 M275.34 163.83 C289.62 146.31, 303.03 131.96, 324.55 107.22 M275.34 163.83 C287.19 150.91, 298.29 137.09, 324.55 107.22 M297.26 163 C303.53 154.54, 307.05 147.87, 324.82 131.31 M297.26 163 C306.72 151.83, 318.26 140.08, 324.82 131.31" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C131.76 0.25, 230.9 -2.37, 292.58 0 M32 0 C102.54 -1.4, 175.01 -0.8, 292.58 0 M292.58 0 C312.74 1.38, 323.59 10.91, 324.58 32 M292.58 0 C315.91 -2.28, 324.49 8.84, 324.58 32 M324.58 32 C326.03 61.71, 324.48 90.78, 324.58 131.61 M324.58 32 C325.17 64.69, 324.12 97.85, 324.58 131.61 M324.58 131.61 C325.42 154.76, 312.67 162.56, 292.58 163.61 M324.58 131.61 C324.88 154.8, 314.53 163.37, 292.58 163.61 M292.58 163.61 C218.54 163.46, 141.91 163.22, 32 163.61 M292.58 163.61 C188.53 162.7, 84.69 162.59, 32 163.61 M32 163.61 C10.48 164.46, -1.16 154.42, 0 131.61 M32 163.61 C8.94 164.87, 0.08 154.26, 0 131.61 M0 131.61 C0.71 106.69, 1.78 77.73, 0 32 M0 131.61 C0.67 93.58, -0.54 55.2, 0 32 M0 32 C-1.77 10.68, 12.15 -0.12, 32 0 M0 32 C-1.88 8.5, 8.41 -1.39, 32 0" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2558.663797236928 3925.8530855957724) rotate(0 90.1259765625 45)"><text x="90.1259765625" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">TAG Read</text><text x="90.1259765625" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">SERVICE</text></g><g stroke-linecap="round" transform="translate(3064.201492590865 3529.866309314093) rotate(0 202.02891846908278 184.5594799442879)"><path d="M42.51 71.41 C42.51 71.41, 42.51 71.41, 42.51 71.41 M42.51 71.41 C42.51 71.41, 42.51 71.41, 42.51 71.41 M10.63 132.47 C44.02 91.18, 80.32 51.76, 103.14 26.06 M10.63 132.47 C44.78 92.52, 79.71 53.41, 103.14 26.06 M1.72 167.12 C44.54 114.66, 88.59 63.98, 136.86 11.65 M1.72 167.12 C42.81 122.75, 81.88 76.17, 136.86 11.65 M1.98 191.2 C63.59 121.22, 123.55 52.52, 162.72 6.3 M1.98 191.2 C60.59 122.82, 120.98 54.6, 162.72 6.3 M2.25 215.28 C61.98 146.4, 123.29 75.17, 188.57 0.94 M2.25 215.28 C57.98 149.72, 116.19 85.14, 188.57 0.94 M8.42 232.57 C81.79 146.91, 153.11 64.77, 209.17 1.63 M8.42 232.57 C54.17 181.62, 99.14 129.47, 209.17 1.63 M13.93 250.61 C59.48 197.4, 105.07 143.62, 229.12 3.07 M13.93 250.61 C70.14 184.59, 127.55 119.36, 229.12 3.07 M21.42 266.39 C100.12 174.26, 179.96 81.77, 247.76 6.02 M21.42 266.39 C82.9 195.23, 145.61 122.29, 247.76 6.02 M31.52 279.16 C120.13 177.34, 210.82 75.14, 264.42 11.23 M31.52 279.16 C93.94 208.21, 154.56 137.02, 264.42 11.23 M40.97 292.67 C100.5 228.87, 157.43 162.2, 281.09 16.45 M40.97 292.67 C100.96 221.16, 162.29 149.72, 281.09 16.45 M51.08 305.43 C135.58 207.03, 222.02 106.57, 297.1 22.42 M51.08 305.43 C137.29 207.81, 223.26 108.38, 297.1 22.42 M63.16 315.93 C136.26 233.74, 206.93 151.35, 310.49 31.4 M63.16 315.93 C157.2 205.43, 253.76 94.72, 310.49 31.4 M75.23 326.43 C145.78 246.26, 215.74 166.86, 324.54 39.64 M75.23 326.43 C173.7 213.37, 273.11 98.87, 324.54 39.64 M87.31 336.92 C156.69 258.28, 226.55 178.95, 337.92 48.62 M87.31 336.92 C158.14 255.42, 230.45 172.05, 337.92 48.62 M102.66 343.65 C165.88 271.15, 230.45 198.51, 349.34 59.88 M102.66 343.65 C161.66 276.49, 221.02 207.9, 349.34 59.88 M117.36 351.12 C196.45 259.55, 277.3 169.2, 360.11 71.88 M117.36 351.12 C179.18 277.35, 241.77 206.1, 360.11 71.88 M132.72 357.85 C181.65 300.33, 233.33 242.29, 371.52 83.13 M132.72 357.85 C215.6 263.62, 296.36 170.41, 371.52 83.13 M150.04 362.31 C216.17 287.84, 279.88 211.62, 379.66 98.16 M150.04 362.31 C197.01 306.91, 244.46 253.01, 379.66 98.16 M168.68 365.26 C250.42 270.12, 333.18 172.58, 387.15 113.94 M168.68 365.26 C236.92 290.28, 302.43 214.37, 387.15 113.94 M187.31 368.21 C260.21 283.81, 333.07 198.71, 394.63 129.72 M187.31 368.21 C254.24 290.99, 320.35 215.01, 394.63 129.72 M208.57 368.14 C260.26 309.24, 309.6 249.7, 398.18 150.03 M208.57 368.14 C281.47 283.68, 355.31 199.06, 398.18 150.03 M231.15 366.56 C270.4 324.37, 306.18 279.85, 401.72 170.34 M231.15 366.56 C298.26 290.34, 364.2 214.58, 401.72 170.34 M256.34 361.96 C299.02 312.42, 342.9 264.55, 401.99 194.42 M256.34 361.96 C309.27 297.39, 363.99 235.85, 401.99 194.42 M286.79 351.33 C326.94 304.66, 367.78 260.6, 398.32 223.03 M286.79 351.33 C316.88 314.03, 349.76 278.67, 398.32 223.03 M328.39 327.86 C344.53 311.45, 359.28 290.67, 381.53 266.73 M328.39 327.86 C345.83 309.2, 362.33 289.04, 381.53 266.73" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M291.32 19.21 C308.49 23.58, 323.81 36.85, 337.5 47.96 C351.18 59.07, 363.87 72.03, 373.41 85.87 C382.96 99.7, 389.71 115.01, 394.74 130.98 C399.78 146.96, 403.23 165.18, 403.65 181.72 C404.07 198.26, 401.69 214.37, 397.25 230.24 C392.81 246.1, 386.05 262.32, 377.02 276.9 C368 291.47, 356.02 306.07, 343.1 317.69 C330.18 329.32, 315.63 338.73, 299.5 346.64 C283.36 354.56, 264.09 361.54, 246.28 365.18 C228.48 368.82, 210.53 369.22, 192.66 368.46 C174.79 367.71, 156.48 365.89, 139.06 360.65 C121.64 355.41, 103.17 346.62, 88.14 337.05 C73.1 327.48, 60.62 315.9, 48.85 303.24 C37.08 290.59, 25.34 276.02, 17.53 261.12 C9.72 246.22, 4.79 230.07, 1.99 213.85 C-0.82 197.63, -1.48 180.2, 0.7 163.8 C2.88 147.39, 8.05 130.86, 15.06 115.42 C22.07 99.98, 31.58 84.34, 42.75 71.14 C53.92 57.95, 67.61 45.97, 82.09 36.25 C96.57 26.53, 112.53 18.75, 129.61 12.81 C146.69 6.87, 166.41 2.22, 184.57 0.63 C202.72 -0.96, 219.49 -0.35, 238.55 3.27 C257.61 6.89, 288.3 18.01, 298.93 22.36 C309.57 26.72, 304.14 26.86, 302.37 29.43 M132.31 10.95 C147.26 2.8, 166.03 3.24, 183.75 2.12 C201.47 0.99, 220.43 1.29, 238.63 4.2 C256.84 7.11, 276.31 12.21, 292.99 19.56 C309.68 26.91, 325.38 37.25, 338.75 48.32 C352.13 59.39, 363.84 72.1, 373.24 85.97 C382.65 99.84, 389.87 115.48, 395.19 131.54 C400.51 147.6, 404.63 165.9, 405.16 182.35 C405.69 198.8, 403.06 214.4, 398.37 230.23 C393.68 246.07, 386.26 262.82, 377.03 277.38 C367.8 291.93, 356.19 306.13, 343 317.57 C329.81 329, 314.29 338.17, 297.91 345.98 C281.54 353.79, 262.6 360.42, 244.74 364.43 C226.88 368.43, 208.71 370.7, 190.75 370 C172.8 369.3, 154.26 365.8, 137.01 360.22 C119.76 354.65, 102.36 346.02, 87.25 336.55 C72.14 327.07, 58.02 316.23, 46.36 303.36 C34.71 290.5, 24.6 274.69, 17.32 259.35 C10.05 244.01, 5.31 227.46, 2.74 211.33 C0.16 195.2, -0.23 178.7, 1.87 162.55 C3.97 146.39, 8.6 129.87, 15.34 114.4 C22.08 98.93, 31.15 83.04, 42.32 69.72 C53.49 56.4, 67.28 44.08, 82.35 34.47 C97.41 24.86, 124.42 15.54, 132.73 12.06 C141.03 8.59, 131.11 10.66, 132.2 13.6" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(3132.724429435769 3691.9225294575153) rotate(0 133.64996337890625 22.5)"><text x="133.64996337890625" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DB(dynamoDB)</text></g><g transform="translate(3512.4183272653536 3497.3034764139375) rotate(0 112.39197540283203 157.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tags:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1.tagId.</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2.tagName</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3.CreatedAT</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. DESC?</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. Color</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g transform="translate(3832.8367366763005 3487.605473429925) rotate(0 152.71194458007812 135)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Taggings_DB</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. Product (SK)</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Entity_id (SK)</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. Tag_id (PK)</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. AddedAt</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g transform="translate(1393.1480220195654 2018.044563720272) rotate(0 1282.337646484375 225)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">API's: two choices; are tags stand-alone? or it can not exist without an entity.</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. create tag: POST /tags {"name":"bug:} -&gt; 201, Fails with 409 if name already exists (or returns existing, your choice): returns tagId, tagName.</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. get tag by id: get /tags/{tagId} -&gt; {"tagId": "123",name": "bug"} //USELESS, should return number of entities maybe.</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. rename Tag: PATCH /tags/{tagID} {name=a} -&gt; {tagid, oldname, newname}</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. search for a tag(full-tagName) get /tags?name=bug</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. Autocomplete search: get /tags?query=bu&amp;pageSize=5 (WE CAN SKIP 4th)</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g transform="translate(23.632450229502865 1702.4838575468311) rotate(0 282.0959167480469 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Why have both tagId and name?</text></g><g transform="translate(64.0064584082138 1789.9838575468311) rotate(0 241.72190856933594 45)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tagId = internal, stable key</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">(BIGINT/UUID).</text></g><g transform="translate(28.788105290793283 1885.695806192307) rotate(0 258.7138977050781 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">name = human string, mutable.</text></g><g transform="translate(53.257169785592396 1957.0274421233626) rotate(0 248.83193969726562 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Benefits of separate tagId:</text></g><g transform="translate(164.61190152475274 2019.0554115115228) rotate(0 132.26394653320312 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Rename is easy</text></g><g transform="translate(10 2071.9072740413976) rotate(0 326.9878845214844 45)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Change name only; all Tagging(tag_id,</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">entity) stay valid.</text></g><g transform="translate(1394.3389397636865 2382.2235375708333) rotate(0 1008.431884765625 67.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">//attaching tags to id:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">user will search for a tag and hit "add"</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">now as we type or when we have typed, we hit searchTag API, if this returns nothing we hit createTag endpoint. </text></g><g transform="translate(1563.021221463453 2554.6742282517007) rotate(0 1096.0736083984375 90)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. Attach Tag to entity:  /PUT /entities/:product/:entityId/tags/:tagID -&gt; {attached: true}, </text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">7. Detach: DELETE  /entities/:product/:entityId/tags/:tagID -&gt; {detached: true}</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">8. Get all tags for an entity:   GET /entities/:product/:entityId/tags -&gt; TAGS[] //maybe we need to paginate this as well.</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">9. get all entities for a tag: GET /tags/{tagId}/entities?page=2&amp;limit=20</text></g><g transform="translate(181.1400413706201 2632.566291111514) rotate(0 535.9497680664065 90)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">dont use /post in 6th API, we say put this new association.</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">POST IS TO CREATE A NEW RESOURCE, or</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">perform an action, BUT TAG already</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">exists, so we just put a association.</text></g><g transform="translate(4203.159475690322 3481.5487951128744) rotate(0 211.73391723632812 67.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Taggins GSI</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">PK = Product+Entity_id</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">SK = Tag_id.</text></g><g transform="translate(1450.757454876738 4413.550527799955) rotate(0 1098.9359130859375 495)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1.problem: duplicates : bug, Bug tags, </text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-&gt;normalize on writes (our tag service will do it)</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. enforce UNIQUE keyword on tagname as well. our backend is source of truth, tagging service handles this.</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. problem: big loaded tags + pagination to fetch all entities for a tag:</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag is hot so pagebased pagination not good enough + it becomes slow as it is linear.</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">solution: cursor based pagination, get /tags/{tagId}/entities?pageSize=10&amp;cursor={}</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">orderby: attachedAt: desc, entityId. done by server</text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. what happens on delete tag, if entities attached, do we cascade delete everything from our DB, or we don't let it delete.</text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. When client wants to display a tagged entities (we just return them product + entity):</text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Call Tagging: get {product, entityId} tuples.</text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Then its their. logic to call the corresponding products API(s) to fetch titles/status.</text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. If we scale our single tagging service, db will be our bottleneck, add redis cache to store results to our heavy queries.</text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">redis key will match whatever client sends, so basically, cursor based result.</text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">7. Even after caching we are still overloaded: 1BRPD =10,000 RPS (so throughput is okay,  but the query is actually heavy)</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">add read replicas plus route appropriate reads.</text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Primary: all writes, and only reads that must see the latest data.</text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">replicas most other reads.good </text></g><g transform="translate(4766.738985553597 3453.1841524269694) rotate(0 776.3398437499995 135)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DRAWBACK oof using DDB:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">to get all tags for an entity:</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">in sql we will do a join and get all the tag data along with id</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-but in ddb, either we denormalize(common).,now our row contains all the tag information</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">and on RENAME YOU MUST GO TO EACH SUCH ROW AND UPDATE THE NAME.</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-2nd optiono is to do two queries now, more round-trips.</text></g><g transform="translate(3848.5969738107606 3281.1973813199) rotate(0 934.6857299804688 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DDB ONLY ALLOWS ONE PK AND ONE SK FIELD, no composites allowed, so entity_key = product+tag_id;</text></g><g transform="translate(1431.3098697126325 5523.348929618369) rotate(0 666.8458862304688 90)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">8th. BIG ONE: WRITES CANT BE HANDLED BY SINGLE PRIMARY NODE: </text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">shard by tag_id, most heavy path is tag-&gt;entities</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#e03131" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g stroke-linecap="round" transform="translate(2473.1667981424134 3348.1687801057196) rotate(0 162.00711153021575 73.76764916237153)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.91 40.54 C10.17 29.66, 17.28 18.01, 36.34 -0.21 M0.91 40.54 C9.41 32.44, 16.51 23.12, 36.34 -0.21 M1.18 64.62 C17.28 49.29, 30.89 30.71, 57.6 -0.28 M1.18 64.62 C23.68 38.84, 46.42 12.94, 57.6 -0.28 M1.44 88.71 C27.51 59.57, 55.36 25.86, 78.2 0.41 M1.44 88.71 C30.18 55.4, 59.76 22.65, 78.2 0.41 M1.05 113.54 C27.5 84.02, 54.47 53.86, 99.46 0.34 M1.05 113.54 C28.22 80.8, 56.41 48.79, 99.46 0.34 M4.6 133.85 C35.16 98.42, 69.47 59.91, 120.72 0.27 M4.6 133.85 C41.9 90.4, 78.91 47.51, 120.72 0.27 M16.68 144.35 C56.86 93.47, 102.31 46.25, 141.98 0.2 M16.68 144.35 C65.06 90.37, 111.82 35.06, 141.98 0.2 M34.66 148.05 C72.65 104.11, 112.01 61.61, 163.24 0.13 M34.66 148.05 C83.26 91.98, 132.44 36.82, 163.24 0.13 M55.92 147.98 C106.54 91.8, 157.78 32.51, 184.5 0.06 M55.92 147.98 C104.35 91.83, 153.17 34.48, 184.5 0.06 M77.18 147.91 C111.02 110.34, 140.23 75.32, 205.76 -0.01 M77.18 147.91 C106.97 113.24, 138.06 78.23, 205.76 -0.01 M98.44 147.85 C128.6 110.67, 159.11 75.81, 227.02 -0.08 M98.44 147.85 C134.12 105.74, 172.37 64.19, 227.02 -0.08 M119.7 147.78 C149.3 115.96, 176.83 85.11, 248.28 -0.15 M119.7 147.78 C152.84 108.68, 185.48 69.13, 248.28 -0.15 M140.96 147.71 C175.95 103.59, 212.96 62.71, 269.54 -0.22 M140.96 147.71 C191.43 91.97, 239.74 33.4, 269.54 -0.22 M162.22 147.64 C212.67 90.32, 260.49 33.47, 290.8 -0.28 M162.22 147.64 C190.38 112.99, 219.31 80.47, 290.8 -0.28 M183.48 147.57 C208.67 114.73, 235.16 82.4, 308.13 4.17 M183.48 147.57 C209.93 115.51, 237.97 83.82, 308.13 4.17 M204.74 147.5 C229.03 116.1, 255.4 88.56, 320.86 13.92 M204.74 147.5 C246.06 100.92, 287.28 54.39, 320.86 13.92 M226 147.43 C256.97 108.03, 292.23 72.8, 324.41 34.22 M226 147.43 C251.29 118.97, 276.06 91.05, 324.41 34.22 M246.6 148.12 C272.93 118.7, 296.76 87.56, 324.67 58.31 M246.6 148.12 C267.5 124.62, 287.47 100.59, 324.67 58.31 M267.86 148.05 C278.32 135.46, 290.03 122.5, 324.28 83.14 M267.86 148.05 C289.84 122.39, 310.82 98.32, 324.28 83.14 M289.12 147.98 C302.78 132.72, 314.03 122.24, 324.55 107.22 M289.12 147.98 C299.19 137.72, 309.07 126.53, 324.55 107.22" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C111.27 -0.73, 191.06 -2.44, 292.01 0 M32 0 C131.34 -0.75, 231.39 -1.91, 292.01 0 M292.01 0 C313.68 0.77, 325.9 10.5, 324.01 32 M292.01 0 C312.3 -1.06, 325.62 11.15, 324.01 32 M324.01 32 C323.23 54.19, 322.4 73.68, 324.01 115.54 M324.01 32 C323.8 62.49, 324.44 93.71, 324.01 115.54 M324.01 115.54 C323.35 136.45, 315.06 145.81, 292.01 147.54 M324.01 115.54 C323.75 134.68, 313.48 149.63, 292.01 147.54 M292.01 147.54 C193.38 146.04, 95.24 147.85, 32 147.54 M292.01 147.54 C225.73 148.21, 161.07 148.39, 32 147.54 M32 147.54 C11.67 146.08, -0.94 135.16, 0 115.54 M32 147.54 C9.87 145.61, -1.53 136.94, 0 115.54 M0 115.54 C1.5 92.69, 1.41 65.39, 0 32 M0 115.54 C0.69 95.95, 0.63 78.16, 0 32 M0 32 C0.23 11.74, 9.9 1.11, 32 0 M0 32 C0.54 11.51, 8.77 -0.24, 32 0" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2480.3559622849334 3399.436429268091) rotate(0 154.8179473876953 22.5)"><text x="154.8179473876953" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tag Write Service</text></g><g mask="url(#mask-cTrn4AydubRrKdYtwg_ej)" stroke-linecap="round"><g transform="translate(1974.3779858121243 3593.9339542789166) rotate(0 252.6667826673788 -81.99013406615632)"><path d="M-1.15 -1.06 C83.25 -28.62, 421.77 -137.63, 506.48 -164.98 M0.45 1 C84.67 -26.4, 421.12 -136, 505.48 -163.49" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1974.3779858121243 3593.9339542789166) rotate(0 252.6667826673788 -81.99013406615632)"><path d="M18.58 -16.42 C10.77 -12.05, 6.29 -6.27, -1.15 -1.06 M18.58 -16.42 C12.19 -12.29, 7.99 -7.97, -1.15 -1.06" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1974.3779858121243 3593.9339542789166) rotate(0 252.6667826673788 -81.99013406615632)"><path d="M23.83 -0.15 C14.36 -0.84, 8.25 -0.09, -1.15 -1.06 M23.83 -0.15 C15.95 -0.56, 10.29 -0.77, -1.15 -1.06" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1974.3779858121243 3593.9339542789166) rotate(0 252.6667826673788 -81.99013406615632)"><path d="M485.79 -148.09 C490.05 -152.83, 497.73 -156.54, 505.48 -163.49 M485.79 -148.09 C490.27 -152.23, 497.02 -156.46, 505.48 -163.49" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1974.3779858121243 3593.9339542789166) rotate(0 252.6667826673788 -81.99013406615632)"><path d="M480.49 -164.35 C486.44 -164.02, 495.75 -162.72, 505.48 -163.49 M480.49 -164.35 C486.48 -163.94, 494.69 -163.66, 505.48 -163.49" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask id="mask-cTrn4AydubRrKdYtwg_ej"><rect x="0" y="0" fill="#fff" width="2580.9666392742865" height="3858.8133723442006"></rect><rect x="2064.0343730900804" y="3421.494245246271" fill="#000" width="327.27587890625" height="180" opacity="1"></rect></mask><g transform="translate(2064.0343730900804 3421.494245246271) rotate(0 163.01039538942268 90.44957496648931)"><text x="163.637939453125" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1.createTag()</text><text x="163.637939453125" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2.attachTag()</text><text x="163.637939453125" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3.UpdateTag()</text><text x="163.637939453125" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">all put post delete</text></g><g stroke-linecap="round"><g transform="translate(1976.723953453331 3991.521571620753) rotate(0 0.2292270281814126 -0.46307543324655853)"><path d="M0.2 0.2 C0.24 0.16, 0.51 -0.38, 0.58 -0.53 M-0.12 -0.01 C-0.16 -0.14, 0.21 -1.06, 0.31 -1.13" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.723953453331 3991.521571620753) rotate(0 0.2292270281814126 -0.46307543324655853)"><path d="M0.26 -0.21 C0.24 -0.05, 0.22 0.12, 0.2 0.2 M0.26 -0.21 C0.24 -0.11, 0.23 0.01, 0.2 0.2" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.723953453331 3991.521571620753) rotate(0 0.2292270281814126 -0.46307543324655853)"><path d="M0.51 -0.08 C0.4 0.03, 0.27 0.15, 0.2 0.2 M0.51 -0.08 C0.43 -0.01, 0.35 0.07, 0.2 0.2" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.723953453331 3991.521571620753) rotate(0 0.2292270281814126 -0.46307543324655853)"><path d="M0.24 -0.72 C0.27 -0.88, 0.3 -1.04, 0.31 -1.13 M0.24 -0.72 C0.25 -0.82, 0.27 -0.92, 0.31 -1.13" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.723953453331 3991.521571620753) rotate(0 0.2292270281814126 -0.46307543324655853)"><path d="M-0.01 -0.86 C0.12 -0.96, 0.24 -1.07, 0.31 -1.13 M-0.01 -0.86 C0.07 -0.93, 0.15 -0.99, 0.31 -1.13" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask></mask><g mask="url(#mask-zFMunVlVQh_4VcRb5YDvV)" stroke-linecap="round"><g transform="translate(1976.4933668903059 3811.0925988054223) rotate(0 262.15290003903556 82.6532034612137)"><path d="M-0.51 -1.14 C86.79 26.5, 437.42 138.57, 524.82 166.45 M1.42 0.88 C88.52 28.12, 437.24 137.53, 524.15 164.7" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.4933668903059 3811.0925988054223) rotate(0 262.15290003903556 82.6532034612137)"><path d="M24.47 -2.15 C12.91 -0.96, 6.36 -2.16, -0.51 -1.14 M24.47 -2.15 C16.73 -2.29, 7.78 -0.71, -0.51 -1.14" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.4933668903059 3811.0925988054223) rotate(0 262.15290003903556 82.6532034612137)"><path d="M19.27 14.14 C9.64 9.05, 5.1 1.55, -0.51 -1.14 M19.27 14.14 C13.31 8.57, 6.07 4.75, -0.51 -1.14" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.4933668903059 3811.0925988054223) rotate(0 262.15290003903556 82.6532034612137)"><path d="M499.18 165.84 C506.93 166.41, 519.7 164.38, 524.15 164.7 M499.18 165.84 C508 164.61, 515.59 165.48, 524.15 164.7" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(1976.4933668903059 3811.0925988054223) rotate(0 262.15290003903556 82.6532034612137)"><path d="M504.29 149.52 C510.15 156.38, 520.94 160.67, 524.15 164.7 M504.29 149.52 C511.37 153.74, 517.27 160.01, 524.15 164.7" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask id="mask-zFMunVlVQh_4VcRb5YDvV"><rect x="0" y="0" fill="#fff" width="2600.7670071861758" height="4076.8141591008825"></rect><rect x="2095.188246730623" y="3848.953378953149" fill="#000" width="286.8838806152344" height="90" opacity="1"></rect></mask><g transform="translate(2095.188246730623 3848.953378953149) rotate(0 143.45802019871826 44.792423313487234)"><text x="143.4419403076172" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">all GET content</text><text x="143.4419403076172" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&amp;topTag calls.</text></g><g stroke-linecap="round"><g transform="translate(2790.200761874262 3478.303554330072) rotate(0 146.2953649181918 85.33489030519195)"><path d="M0.67 -0.38 C49.04 28.23, 242.36 142.53, 290.75 171.22 M-0.43 -1.62 C48.27 27.15, 244.62 143.21, 293.02 172.29" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2790.200761874262 3478.303554330072) rotate(0 146.2953649181918 85.33489030519195)"><path d="M25.25 4.22 C16.18 1.39, 6.86 0.28, 0.67 -0.38 M25.25 4.22 C18.78 2.81, 11.5 2.36, 0.67 -0.38" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2790.200761874262 3478.303554330072) rotate(0 146.2953649181918 85.33489030519195)"><path d="M16.54 18.94 C10.52 11, 4.2 4.82, 0.67 -0.38 M16.54 18.94 C12.44 13.51, 7.5 9.09, 0.67 -0.38" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2790.200761874262 3478.303554330072) rotate(0 146.2953649181918 85.33489030519195)"><path d="M268.46 167.62 C276.27 167.7, 283.85 169.78, 293.02 172.29 M268.46 167.62 C275.25 168.44, 281.23 170.49, 293.02 172.29" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2790.200761874262 3478.303554330072) rotate(0 146.2953649181918 85.33489030519195)"><path d="M277.21 152.93 C281.95 158.11, 286.53 165.25, 293.02 172.29 M277.21 152.93 C281.62 157.76, 285.24 163.78, 293.02 172.29" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2823.077599406368 4014.8126738515857) rotate(0 140.95788124640876 -101.92799227992509)"><path d="M0.15 -1.01 C47.28 -35.07, 235.81 -170.89, 283.15 -204.94 M-1.23 1.08 C45.68 -32.75, 234.52 -169.3, 282.02 -203.53" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2823.077599406368 4014.8126738515857) rotate(0 140.95788124640876 -101.92799227992509)"><path d="M14.21 -21.68 C7.81 -15.45, 4.45 -6.94, 0.15 -1.01 M14.21 -21.68 C11.06 -16.81, 6.12 -11.13, 0.15 -1.01" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2823.077599406368 4014.8126738515857) rotate(0 140.95788124640876 -101.92799227992509)"><path d="M24.21 -7.81 C14.59 -6.12, 7.94 -2.17, 0.15 -1.01 M24.21 -7.81 C18.71 -6.39, 11.27 -4.17, 0.15 -1.01" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2823.077599406368 4014.8126738515857) rotate(0 140.95788124640876 -101.92799227992509)"><path d="M267.98 -182.84 C271.01 -190.24, 276.88 -195.32, 282.02 -203.53 M267.98 -182.84 C272.23 -188.26, 274.29 -192.88, 282.02 -203.53" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2823.077599406368 4014.8126738515857) rotate(0 140.95788124640876 -101.92799227992509)"><path d="M257.97 -196.71 C264.22 -199.56, 273.39 -200.08, 282.02 -203.53 M257.97 -196.71 C264.58 -198.67, 269.13 -199.84, 282.02 -203.53" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(2773.9995494461036 3688.2576327152856) rotate(0 96.54559138809827 83.73801163749522)"><path d="M9.12 46.35 C9.12 46.35, 9.12 46.35, 9.12 46.35 M9.12 46.35 C9.12 46.35, 9.12 46.35, 9.12 46.35 M1.51 79.49 C22.57 55.65, 41.36 30.4, 66.46 4.78 M1.51 79.49 C22.9 54.57, 43.32 30.73, 66.46 4.78 M3.75 101.31 C24.24 78.69, 46.57 52.24, 90.35 1.69 M3.75 101.31 C25.11 78.06, 44.92 54.36, 90.35 1.69 M9.92 118.6 C52.34 73.44, 92.08 27.82, 111.61 1.62 M9.92 118.6 C35.08 87.96, 61.36 59.86, 111.61 1.62 M19.37 132.11 C41.54 103.77, 65.49 78.11, 128.93 6.08 M19.37 132.11 C47.52 99.41, 74.25 67.03, 128.93 6.08 M30.79 143.37 C66.65 101.88, 102.45 61.91, 144.94 12.05 M30.79 143.37 C67.53 102.08, 105.28 60.46, 144.94 12.05 M44.18 152.35 C71.46 121.05, 97.03 93.35, 158.33 21.03 M44.18 152.35 C81.69 110.26, 118.03 68.81, 158.33 21.03 M58.88 159.83 C79.03 135.87, 105.03 109.01, 171.06 30.78 M58.88 159.83 C93.95 119.88, 129.58 79.84, 171.06 30.78 M76.2 164.29 C113.36 123.24, 151.73 80.7, 180.51 44.29 M76.2 164.29 C111.93 125.8, 146.72 85.03, 180.51 44.29 M94.84 167.24 C128.48 125.29, 164.08 83.29, 188 60.07 M94.84 167.24 C128.03 126.85, 162.92 87.22, 188 60.07 M118.06 164.91 C135.98 148.41, 150.77 130.57, 191.54 80.38 M118.06 164.91 C145.72 132.35, 174.8 98.78, 191.54 80.38 M149.17 153.52 C161.21 143.24, 171.17 128.95, 187.87 108.99 M149.17 153.52 C160.72 141.13, 169.98 129.39, 187.87 108.99" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M64.86 4.88 C75.62 0.2, 90.82 -0.97, 103.29 -0.4 C115.75 0.18, 128.69 3.64, 139.65 8.33 C150.6 13.03, 161.03 19.8, 168.99 27.75 C176.96 35.71, 183.44 45.72, 187.43 56.04 C191.43 66.35, 193.69 78.76, 192.96 89.65 C192.22 100.54, 188.38 111.76, 183.04 121.37 C177.7 130.99, 170 140.38, 160.92 147.35 C151.83 154.32, 140.33 159.93, 128.53 163.21 C116.73 166.48, 102.43 167.71, 90.11 166.99 C77.8 166.26, 65.48 163.43, 54.65 158.86 C43.82 154.29, 33.43 147.45, 25.13 139.58 C16.84 131.71, 8.9 121.71, 4.86 111.64 C0.83 101.57, 0.26 90, 0.94 79.15 C1.63 68.29, 3.62 56.36, 8.98 46.52 C14.34 36.67, 22.29 27.41, 33.11 20.06 C43.93 12.72, 65.63 5.52, 73.89 2.46 C82.15 -0.61, 82.18 0.35, 82.66 1.66 M133.48 6.47 C145.14 8.57, 155.26 14.78, 163.81 22.15 C172.36 29.52, 179.88 40.56, 184.77 50.69 C189.66 60.82, 193.13 72.39, 193.17 82.94 C193.22 93.49, 189.68 104.04, 185.05 113.99 C180.41 123.94, 173.72 134.9, 165.34 142.63 C156.97 150.37, 145.86 156.02, 134.81 160.37 C123.75 164.72, 111.36 168.47, 98.99 168.75 C86.63 169.02, 72.41 166.14, 60.6 162.04 C48.78 157.94, 36.87 151.71, 28.09 144.15 C19.3 136.6, 12.37 126.34, 7.88 116.7 C3.38 107.07, 1.06 97.07, 1.11 86.35 C1.15 75.64, 4.01 62.5, 8.16 52.42 C12.31 42.34, 17.47 33.3, 25.99 25.86 C34.52 18.43, 47.88 12.18, 59.31 7.79 C70.73 3.41, 82.33 -0.07, 94.54 -0.45 C106.76 -0.83, 126.55 4.35, 132.61 5.51 C138.67 6.67, 131.44 5.23, 130.89 6.52" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2822.393111043254 3726.7839284808288) rotate(0 48.38398742675781 45)"><text x="48.38398742675781" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Redis</text><text x="48.38398742675781" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cache</text></g><g stroke-linecap="round"><g transform="translate(2581.4339469953666 3877.0499959871304) rotate(0 101.12613145866499 -42.37252854691178)"><path d="M-1 0.23 C33.02 -13.74, 169.03 -69.26, 203.25 -83.22 M0.68 -0.7 C34.6 -15.07, 168.29 -70.81, 202.18 -84.97" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2581.4339469953666 3877.0499959871304) rotate(0 101.12613145866499 -42.37252854691178)"><path d="M17.51 -16.58 C13.77 -13.28, 10.35 -7.62, -1 0.23 M17.51 -16.58 C10.69 -11.27, 6.05 -5.7, -1 0.23" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2581.4339469953666 3877.0499959871304) rotate(0 101.12613145866499 -42.37252854691178)"><path d="M23.98 -0.75 C18.68 -1.1, 13.8 0.95, -1 0.23 M23.98 -0.75 C14.95 -0.78, 8.15 -0.49, -1 0.23" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2581.4339469953666 3877.0499959871304) rotate(0 101.12613145866499 -42.37252854691178)"><path d="M183.8 -68.03 C188.28 -72.11, 193.26 -74.13, 202.18 -84.97 M183.8 -68.03 C189.16 -73.66, 196.82 -79.34, 202.18 -84.97" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2581.4339469953666 3877.0499959871304) rotate(0 101.12613145866499 -42.37252854691178)"><path d="M177.21 -83.81 C183.27 -84.24, 189.75 -82.67, 202.18 -84.97 M177.21 -83.81 C184.82 -84.12, 194.68 -84.54, 202.18 -84.97" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask></mask><g mask="url(#mask-aZFdAW1ZZqSPcmT8zYDtA)" stroke-linecap="round"><g transform="translate(2678.276049282701 3493.8430835773834) rotate(0 63.007514830537275 113.40639402582747)"><path d="M-1.07 -0.79 C20.13 37.22, 105.86 189.8, 127.09 227.6 M0.57 1.41 C21.63 39.12, 104.8 188.31, 126.18 225.91" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2678.276049282701 3493.8430835773834) rotate(0 63.007514830537275 113.40639402582747)"><path d="M17.88 15.52 C11.18 10.79, 8.41 4.79, -1.07 -0.79 M17.88 15.52 C12.54 11.84, 9.03 8.64, -1.07 -0.79" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2678.276049282701 3493.8430835773834) rotate(0 63.007514830537275 113.40639402582747)"><path d="M2.96 23.88 C0.58 16.88, 2.09 8.49, -1.07 -0.79 M2.96 23.88 C1.18 18.29, 1.23 13.1, -1.07 -0.79" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2678.276049282701 3493.8430835773834) rotate(0 63.007514830537275 113.40639402582747)"><path d="M107.21 209.62 C111.29 214.59, 119.41 217.96, 126.18 225.91 M107.21 209.62 C110.9 213.92, 116.43 218.48, 126.18 225.91" stroke="#1971c2" stroke-width="4" fill="none"></path></g><g transform="translate(2678.276049282701 3493.8430835773834) rotate(0 63.007514830537275 113.40639402582747)"><path d="M122.12 201.24 C121.88 208.49, 125.72 214.26, 126.18 225.91 M122.12 201.24 C122.25 207.45, 124.23 214.01, 126.18 225.91" stroke="#1971c2" stroke-width="4" fill="none"></path></g></g><mask id="mask-aZFdAW1ZZqSPcmT8zYDtA"><rect x="0" y="0" fill="#fff" width="2905.2891434982585" height="3820.629981063379"></rect><rect x="2554.8526647498547" y="3562.236532320385" fill="#000" width="373.85986328125" height="90" opacity="1"></rect></mask><g transform="translate(2554.852664749853 3562.236532320385) rotate(0 186.43089936338447 45.01294528282597)"><text x="186.929931640625" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">maybe invalidate keys</text><text x="186.929931640625" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">upon updation</text></g><g transform="translate(1405.9568819400502 5762.95810751462) rotate(0 1584.107177734375 2857.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">9th problem is : read write hsould scale independently.</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">solution: we just did tthat all get/requests to read and get top trending tags andeverything</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">write handles put/patch/delete/post requests</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">10th problem is: Readd your own writes consistency.</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. after attaching /detaching a tag, our write service can delete the first page we cached to get tags for all the entity id</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">, first page is h it a lot and is the one new ttags are added to, so this will make sure the stale dta is not returned.</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"> but this still doesn't gurantees we read freshest read. </text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-&gt;solution: use a redis instance to store a key = true for productandentityId, and a ttl of 5 seconds. so that if get /entity...</text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">iis hit, we make a quick redis check, if present we go to our datastore and only read from leader.</text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Key: fresh-entity:{product}:{entityId}</text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Value: e.g. "1"</text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">there is tcp connection pooling, for faster reads, redis client does that for you</text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">11. Fetch top-k tags (leetcode leaderboard problem-use redis sorted set)</text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">problem: top: number of entities tagged to it.</text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">API looks like get /tags/popular?product={}-&gt; return top-k tags(i dont want to put limmit={} as well</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">but we can even do on backend limit = min(maxLimit, userlimit) maxlimit is set to 10 by us.</text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-&gt; we can make this query faster by having a count variable in our tag table.</text><text x="0" y="1021.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">each attach/detach tag will update our tagging table, but also now go to</text><text x="0" y="1066.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag table and +1/-1 the count. (this can be per product counts and one</text><text x="0" y="1111.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">single global count)</text><text x="0" y="1156.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1201.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">we index the tag table by count.</text><text x="0" y="1246.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- postgres indexes are per shard and not global: when we use postgres cluster,</text><text x="0" y="1291.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">it will fetch top k enteries per shard (will touch each shard) and agreegate the result for us</text><text x="0" y="1336.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-Dynamodb can';t query this efficiently at all, pk can't be something taht changes a lot, and you cannot query on sort key alone, you have to specify what PK are we talking about.</text><text x="0" y="1381.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1426.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">SOLUTION IS BASICALLY ENTIRE LEADERBOARD SOLUTION IN LEADERBOARD LEETCODE SOLUTION:</text><text x="0" y="1471.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">we use redis sorted set, do cdc to keep our redis fresh, every query will hit our redis, we can do range queries,</text><text x="0" y="1516.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">we can give paginated results back.</text><text x="0" y="1561.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1606.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">In Redis:</text><text x="0" y="1651.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">top:tags = the key (string identifier).</text><text x="0" y="1696.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">The value stored at that key is a sorted set data structure:</text><text x="0" y="1741.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1786.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">members: tag_bug, tag_ui, </text><text x="0" y="1831.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">score per member: the count / rank.</text><text x="0" y="1876.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1921.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So:</text><text x="0" y="1966.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ZINCRBY top:tags 1 tag_bug</text><text x="0" y="2011.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ZREVRANGE top:tags 0 9 WITHSCORES (TOP K frrom back -REVRANGE)</text><text x="0" y="2056.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2101.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2146.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">12. WHAT IF REDDIS SORTED SETT GOES DOWWN??</text><text x="0" y="2191.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">During Redis outage</text><text x="0" y="2236.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We keep reading/writing main DB (Postgres or Dynamo) as usual.</text><text x="0" y="2281.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CDC / binlog / Streams still accumulate events.</text><text x="0" y="2326.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">For /tags/popular:</text><text x="0" y="2371.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Prefer to serve last-known Top-K from in-memory cache in the read service.</text><text x="0" y="2416.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Optionally fall back to DB Top-K only if Postgres, because:</text><text x="0" y="2461.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If main store is Postgres</text><text x="0" y="2506.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We have tags.usage_count + index (usage_count DESC, tag_id).</text><text x="0" y="2551.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We can safely:</text><text x="0" y="2596.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Do requst coalescing: one Postgres query per interval, share result for many callers.</text><text x="0" y="2641.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Run SELECT ... ORDER BY usage_count DESC LIMIT K as a slow-path fallback when Redis is down.</text><text x="0" y="2686.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So Postgres is a good fallback source for Top-K.</text><text x="0" y="2731.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2776.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If main store is DynamoDB</text><text x="0" y="2821.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Base table cant do global ORDER BY usageCount efficiently.</text><text x="0" y="2866.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Even with LSI/GSI, youd need Scan/fan-out  bad as a fallback.</text><text x="0" y="2911.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So for Dynamo:</text><text x="0" y="2956.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Top-K really depends on a pre-aggregated structure (Redis or a dedicated TopTags table).</text><text x="0" y="3001.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">When Redis is down, you mostly rely on in-memory last result / degraded response, not a cheap Dynamo query.</text><text x="0" y="3046.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3091.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">When Redis comesback/ or automatic failover.</text><text x="0" y="3136.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">It restarts with RDB+AOF (if configured, this is for single node).</text><text x="0" y="3181.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CDC consumer replays missed events to catch it up.</text><text x="0" y="3226.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3271.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3316.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">13.add autosearch on each keystroke:</text><text x="0" y="3361.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We can add index on tagName as an improvement: </text><text x="0" y="3406.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Fix: add a B-tree index on (tenant_id, name).</text><text x="0" y="3451.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Then WHERE tenant_id = ? AND name &gt;= 'bu' AND name &lt; 'bv' (or LIKE 'bu%') can use the index.</text><text x="0" y="3496.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DB walks only the matching prefix range, not whole table.</text><text x="0" y="3541.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3586.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">PROBLEM: STILL A MULTISHARD SSEARCH INSTIDE POSTGRES CLUSTER&gt;</text><text x="0" y="3631.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1) Dont shard tags in the first place (if possible)</text><text x="0" y="3676.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3721.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Keep tags as a small, unpartitioned table in one Postgres instance per region.</text><text x="0" y="3766.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3811.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Only shard/partition the heavy taggings table.</text><text x="0" y="3856.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3901.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Autocomplete now hits a single, small table with (tenant_id, name) index  cheap.</text><text x="0" y="3946.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3991.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Maintain another sorted set on Redis. Use CDC, for word bug, we store to b, bu, bug our tag details, they are stored in</text><text x="0" y="4036.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">sortedd manner, maybe by use count or alphabetically.</text><text x="0" y="4081.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We can cache the results.</text><text x="0" y="4126.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4171.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4216.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">14. fuzzy searching:</text><text x="0" y="4261.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Dont turn fuzzy on for every keystroke; its heavier than prefix.</text><text x="0" y="4306.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4351.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">A reasonable pipeline:</text><text x="0" y="4396.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">User types "bu":</text><text x="0" y="4441.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Do prefix search using Redis prefix index (fast).</text><text x="0" y="4486.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Return top K; this handles the happy path.</text><text x="0" y="4531.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4576.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">User types "bg" and:</text><text x="0" y="4621.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Prefix search on "bg" returns very few results (or none).</text><text x="0" y="4666.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Then fall back to fuzzy search in Postgres:</text><text x="0" y="4711.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Use trigram similarity vs name_normalized for "bg".</text><text x="0" y="4756.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4801.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Merge/rank:</text><text x="0" y="4846.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Combine prefix results (if any) + fuzzy results.</text><text x="0" y="4891.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Deduplicate.</text><text x="0" y="4936.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4981.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Order by:</text><text x="0" y="5026.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">exact prefix matches first,</text><text x="0" y="5071.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">then fuzzy matches by similarity,</text><text x="0" y="5116.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">break ties by usage_count.</text><text x="0" y="5161.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="5206.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Rule of thumb:</text><text x="0" y="5251.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Short input (12 chars): prefix only (fuzzy on too-short strings is useless/noisy).</text><text x="0" y="5296.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Longer input (3 chars):</text><text x="0" y="5341.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Try prefix first.</text><text x="0" y="5386.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If result set is too small, add fuzzy.</text><text x="0" y="5431.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="5476.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. When to mention a real search engine</text><text x="0" y="5521.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If interviewer pushes scale / languages / more advanced queries:</text><text x="0" y="5566.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Say: If fuzzy needs get more complex (multi-lingual, stemming, etc.), Id index tags into a </text><text x="0" y="5611.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">search engine (Elasticsearch/OpenSearch/Meilisearch), which gives fuzzy matching, analyzers, and </text><text x="0" y="5656.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scoring out of the box. But for tag names as short tokens, Postgres trigram index is usually enough.</text><text x="0" y="5701.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text></g><g transform="translate(377.1358811496593 6637.837615768454) rotate(0 531.7738647460938 202.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-&gt;currently we make sql query like </text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">select tg. tag_id, t.name,</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">COUNT(*) as posts_tagged, </text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">fROM TAGGING TG JOIN TAGS T ON t-.tag_id =tg.tag_id</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">//filterbyproduct</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">where prodduct=""</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">group_bY t.tag_id</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">order BY posts_tagged DeSC</text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LIMIT :limit; </text></g><g transform="translate(341.54310558463067 6521.861566732179) rotate(0 358.0019531249998 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">TOUCH EVERY ROW OF BOTH THE DB.</text></g><g transform="translate(6091.695867681837 7723.761474057028) rotate(0 1079.7298583984375 2227.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">PERMISSIONS SET UP:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. Two different permissions layers</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tenant isolation</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Company A must never see Company Bs data.</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Implemented by tenant_id everywhere.</text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">User-level ACL</text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Within Company A, Alice cant see Bobs private stuff.</text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Implemented by calling products ACL API's(Jira / Confluence / Bitbucket), not by Tagging.</text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ACL = Access Control List = who can do what on which object.</text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Single-tenant, but with per-user ACL</text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Now different users see different issues/pages/PRs.</text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Core rule: Tagging does not own ACL; products do.</text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">a) Entity  tags (GET /entities/{product}/{entityId}/tags) get all tags for an entity, NO ISSSUES HERE******</text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Called from product side (Jira / Conf / BB) or behind gateway.</text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Product/gateway already checked can user see this entity?.</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tagging just returns tags.</text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"> No extra ACL logic needed in Tagging.</text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1021.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">b) Tag  entities (GET /tags/{tagId}/entities)</text><text x="0" y="1066.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">This is where leaks can happen.</text><text x="0" y="1111.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1156.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">High-level flow:</text><text x="0" y="1201.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Client  Gateway with users auth.</text><text x="0" y="1246.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Gateway  Tagging:</text><text x="0" y="1291.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1336.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Give me candidate entities for tag T, page X.</text><text x="0" y="1381.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tagging queries taggings for that tag with LIMIT / cursor (e.g. 5 pageSize), so we dont pull millions.</text><text x="0" y="1426.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1471.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Gateway groups candidates by product:</text><text x="0" y="1516.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Jira: [JIRA-1, JIRA-2, ]</text><text x="0" y="1561.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Confluence: [CONF-10, ]</text><text x="0" y="1606.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1651.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Gateway calls bulk ACL APIs for each product:</text><text x="0" y="1696.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">For user U, which of these entityIds are visible?</text><text x="0" y="1741.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Gateway filters out disallowed entities.</text><text x="0" y="1786.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1831.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Takes first pageSize allowed entities, returns to client (plus cursor for next page).</text><text x="0" y="1876.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Next page: repeat with next batch of taggings.</text><text x="0" y="1921.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1966.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Optimizations (still mid-level):</text><text x="0" y="2011.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Cache ACL answers briefly:</text><text x="0" y="2056.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">acl:{userId}:{product}:{entityId} = allowed/denied with short TTL.</text><text x="0" y="2101.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Always page/taggings so you never scan huge tag sets in one go.</text><text x="0" y="2146.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2191.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. Limiting the candidate set with what user can see</text><text x="0" y="2236.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">To avoid sending huge lists to ACL services:</text><text x="0" y="2281.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2326.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">For each user, cache coarse permissions: call /internals/user/:userId/projects</text><text x="0" y="2371.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">accessibleProjects[userId] = [P1, P2, P5]</text><text x="0" y="2416.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">accessibleSpaces[userId] = [SPACE_A, SPACE_B]</text><text x="0" y="2461.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Fetched from product ACL APIs, TTL ~510 minutes.</text><text x="0" y="2506.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2551.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Then when you search by tag:</text><text x="0" y="2596.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Query Tagging (or a search index) like</text><text x="0" y="2641.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tenant = T AND tagId = X AND projectId IN accessibleProjects[userId] </text><text x="0" y="2686.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2731.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Result:</text><text x="0" y="2776.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">You only retrieve entities in projects/spaces the user can ever see.</text><text x="0" y="2821.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Final step is still per-entity ACL check, but on a much smaller list.</text><text x="0" y="2866.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2911.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. Multi-tenant extension</text><text x="0" y="2956.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Multi-tenant adds tenant isolation on top.</text><text x="0" y="3001.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Data model:</text><text x="0" y="3046.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Add tenant_id to:</text><text x="0" y="3091.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3136.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tags(tenant_id, tag_id, ...)</text><text x="0" y="3181.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">taggings(tenant_id, tag_id, product, entity_id, ...)</text><text x="0" y="3226.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3271.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Use tenant_id in all primary keys and indexes.</text><text x="0" y="3316.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3361.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Every DB query is scoped: WHERE tenant_id = :tenantIdFromAuth.</text><text x="0" y="3406.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3451.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Caches / Redis:</text><text x="0" y="3496.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Prefix keys with tenant:</text><text x="0" y="3541.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3586.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">top:tags:{tenantId}</text><text x="0" y="3631.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">entity:tags:{tenantId}:{product}:{entityId}</text><text x="0" y="3676.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">fresh-entity:{tenantId}:{product}:{entityId}</text><text x="0" y="3721.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3766.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So:</text><text x="0" y="3811.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tagging enforces tenant boundary via tenant_id.</text><text x="0" y="3856.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Products still enforce per-user ACL inside each tenant (same gateway + bulk ACL flow as above).</text><text x="0" y="3901.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="3946.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. Top-K tags and permissions</text><text x="0" y="3991.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4036.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">GET /v1/tags/popular (Top-K tags):</text><text x="0" y="4081.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Returns tag IDs/names + counts.</text><text x="0" y="4126.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Generally not ACL-filtered, because tags themselves arent sensitive.</text><text x="0" y="4171.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4216.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">GET /v1/tags/{tagId}/entities:</text><text x="0" y="4261.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Is ACL-filtered using the gateway + bulk ACL flow we described.</text><text x="0" y="4306.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="4351.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If an interviewer pushes, you can say:</text><text x="0" y="4396.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We protect entities, not tag names. If needed, we could define Top-K among entities the user can see, but base design: </text><text x="0" y="4441.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Top-K tags is per tenant; tagentities is ACL-filtered per user.</text></g><g transform="translate(6052.126469218626 7506.36477474375) rotate(0 342.46016541956214 59.110093588929885)"><text x="0" y="83.32158792295544" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="94.57614974228768px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">PERMISSIONS</text></g><g transform="translate(6055.0625722344275 4397.286341867686) rotate(0 2218.3544921875 1305)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. Write path (still DB-centric)</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">App writes:</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Create / update tag.</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Create / update taggings (content  tag relationships).</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">These go to the primary DB (Postgres/MySQL/Dynamo etc.).</text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CDC connector:</text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Subscribes to DB changes.</text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Streams them into a search indexer.</text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Indexer:</text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Transforms DB rows into OpenSearch documents:</text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag index: id, name_normalized, usage_count, ...</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">maybe content index with tags embedded.</text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So yes: OpenSearch is built and kept fresh from CDC.</text><text x="0" y="1021.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1066.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. Read path (where we moved search)</text><text x="0" y="1111.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1156.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Anything that smells like search / autocomplete / fuzzy / ranking:</text><text x="0" y="1201.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Autocomplete on tag names:</text><text x="0" y="1246.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Query OpenSearch tags index:</text><text x="0" y="1291.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prefix + fuzziness, order by usage_count.</text><text x="0" y="1336.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1381.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Fuzzy tag search ("bg" ~ "bug"):</text><text x="0" y="1426.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1471.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">OpenSearch query with analyzers + fuzziness.</text><text x="0" y="1516.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Find all content by tag + text term:</text><text x="0" y="1561.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1606.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">OpenSearch query on content index with tag filters + full-text.</text><text x="0" y="1651.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1696.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">So: search model (prefix + fuzzy + scoring) lives in OpenSearch now, not Postgres.</text><text x="0" y="1741.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1786.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. What still stays outside OpenSearch</text><text x="0" y="1831.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1876.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Source of truth &amp; strong consistency:</text><text x="0" y="1921.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1966.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tag CRUD, taggings, permissions  DB.</text><text x="0" y="2011.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2056.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Hot counters / leaderboards:</text><text x="0" y="2101.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2146.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Top 10 tags  still nice to keep in Redis ZSET off CDC or clickstream.</text><text x="0" y="2191.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2236.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Simple key lookups:</text><text x="0" y="2281.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2326.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">GET /tags/{id}  DB/Redis, not ES.</text><text x="0" y="2371.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2416.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">OpenSearch is the search view, not the canonical store.</text><text x="0" y="2461.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2506.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. Short phrase you can say</text><text x="0" y="2551.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2596.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Yes, once I add OpenSearch behind CDC, all the tag search/auto-complete/fuzzy stuff runs against OpenSearch indices. The relational DB remains the source of truth, CDC keeps the index fresh, and Redis is optional for hot leaderboards or caching.</text></g><g stroke-linecap="round"><g transform="translate(1557.9375531944524 3681.229568211973) rotate(0 105.43727354473276 -3.653544450746267)"><path d="M0.51 0.31 C35.2 -0.97, 174.38 -6.42, 209.32 -7.61 M-0.68 -0.58 C34.28 -1.7, 176.56 -5.59, 211.55 -6.4" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1557.9375531944524 3681.229568211973) rotate(0 105.43727354473276 -3.653544450746267)"><path d="M23.66 -9.14 C14.92 -6.77, 4.13 -1.66, 0.51 0.31 M23.66 -9.14 C17.18 -6.64, 10.21 -2.58, 0.51 0.31" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1557.9375531944524 3681.229568211973) rotate(0 105.43727354473276 -3.653544450746267)"><path d="M24.31 7.95 C15.31 3.49, 4.26 1.77, 0.51 0.31 M24.31 7.95 C17.66 5.13, 10.48 3.85, 0.51 0.31" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1557.9375531944524 3681.229568211973) rotate(0 105.43727354473276 -3.653544450746267)"><path d="M188.29 2.75 C198.09 -2.51, 205.84 -4.83, 211.55 -6.4 M188.29 2.75 C196.31 -0.81, 203.81 -2.56, 211.55 -6.4" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1557.9375531944524 3681.229568211973) rotate(0 105.43727354473276 -3.653544450746267)"><path d="M187.85 -14.35 C197.83 -12.78, 205.76 -8.27, 211.55 -6.4 M187.85 -14.35 C195.98 -12.58, 203.61 -9, 211.55 -6.4" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(7546.262686777759 1827.6823410791621) rotate(0 230.55054242732785 176.97448707192598)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.91 40.54 C8.38 29.37, 18.81 22.32, 36.34 -0.21 M0.91 40.54 C9.66 32.44, 16.02 22.92, 36.34 -0.21 M1.18 64.62 C14.04 49.05, 30.11 31.9, 57.6 -0.28 M1.18 64.62 C12.48 50.84, 24.48 36.86, 57.6 -0.28 M0.79 89.46 C23.42 64.87, 47.16 37.7, 78.2 0.41 M0.79 89.46 C24.99 61.46, 47.92 35.22, 78.2 0.41 M1.05 113.54 C36.66 72.96, 67.33 35.59, 99.46 0.34 M1.05 113.54 C29.12 79.22, 59.42 46.58, 99.46 0.34 M0.66 138.38 C39.73 92.63, 79.4 47.11, 120.72 0.27 M0.66 138.38 C29.03 107.52, 55.77 77.56, 120.72 0.27 M0.93 162.46 C35.23 119.52, 71.18 78.18, 141.98 0.2 M0.93 162.46 C35 123.38, 68.52 83.02, 141.98 0.2 M0.54 187.3 C35.13 149.01, 67.22 108.65, 163.24 0.13 M0.54 187.3 C56.31 124.27, 111.02 59.9, 163.24 0.13 M0.81 211.38 C45.75 156.98, 93.34 103.02, 184.5 0.06 M0.81 211.38 C44.09 163.22, 86.73 114.63, 184.5 0.06 M1.07 235.46 C62.6 168.44, 119.27 101.8, 205.76 -0.01 M1.07 235.46 C41.02 188.15, 83.13 139.64, 205.76 -0.01 M0.68 260.3 C66 183.64, 134.78 107.14, 227.02 -0.08 M0.68 260.3 C63.3 187.72, 125.66 116, 227.02 -0.08 M0.95 284.38 C99.89 172.76, 197.21 59.55, 248.28 -0.15 M0.95 284.38 C56.96 220.7, 112.78 157.42, 248.28 -0.15 M0.56 309.22 C87.39 205.01, 177.75 102.76, 269.54 -0.22 M0.56 309.22 C89.93 205.66, 178.32 103.4, 269.54 -0.22 M1.48 332.54 C85.93 235.75, 169.88 139.93, 290.8 -0.28 M1.48 332.54 C63.2 262.15, 125.01 191.1, 290.8 -0.28 M10.28 346.81 C72.74 274.89, 134.92 203.9, 311.41 0.4 M10.28 346.81 C125.55 215.61, 239.75 84.39, 311.41 0.4 M25.63 353.54 C142.58 220.59, 258.47 87.14, 332.67 0.33 M25.63 353.54 C103.61 263.79, 182.31 172.4, 332.67 0.33 M46.24 354.22 C156.94 225.34, 268.68 97.64, 353.93 0.26 M46.24 354.22 C151.85 234.24, 256.84 113.7, 353.93 0.26 M66.84 354.91 C129.09 280.57, 193.3 208.45, 375.19 0.19 M66.84 354.91 C137.53 272.82, 208.46 191.52, 375.19 0.19 M88.1 354.84 C187.81 237.56, 288.02 121.88, 396.45 0.12 M88.1 354.84 C202.43 223.97, 314.47 94.15, 396.45 0.12 M109.36 354.77 C220.14 229.65, 330.56 104.2, 417.71 0.06 M109.36 354.77 C196.61 254.69, 283.9 155.08, 417.71 0.06 M130.62 354.7 C198.09 277.4, 265.95 199.46, 437.66 1.5 M130.62 354.7 C232.36 235.4, 335.67 116.55, 437.66 1.5 M151.88 354.63 C262.5 227.69, 371.1 101.65, 453.01 8.22 M151.88 354.63 C259.26 231.53, 365.63 109.28, 453.01 8.22 M173.14 354.56 C246.56 269.64, 321.06 183.73, 460.5 24 M173.14 354.56 C278.52 233.67, 385.01 112.51, 460.5 24 M194.4 354.49 C249.76 291.99, 303.81 228.95, 461.42 47.33 M194.4 354.49 C264.55 272.72, 335.33 190.74, 461.42 47.33 M215.66 354.42 C278.22 285.06, 337.44 216.65, 461.03 72.16 M215.66 354.42 C291.79 267.13, 367.95 179.71, 461.03 72.16 M236.92 354.36 C323.14 253.51, 410.1 153.14, 461.3 96.24 M236.92 354.36 C285.05 298.55, 332.66 242.52, 461.3 96.24 M258.18 354.29 C316.79 287.56, 373.21 219.64, 461.56 120.33 M258.18 354.29 C308.19 297.14, 358.43 239.56, 461.56 120.33 M279.44 354.22 C328.72 294.69, 377.36 238.32, 461.17 145.16 M279.44 354.22 C331.37 293.5, 383.78 232.21, 461.17 145.16 M300.05 354.9 C342.72 305.89, 386.6 254.73, 461.44 169.24 M300.05 354.9 C363.4 281.53, 426.11 210.03, 461.44 169.24 M321.31 354.83 C369.96 297.11, 421.81 239.26, 461.05 194.08 M321.31 354.83 C372.69 296.7, 422.73 238.46, 461.05 194.08 M342.57 354.77 C387.33 305.54, 431.77 253.66, 461.31 218.16 M342.57 354.77 C387.87 303.75, 432.52 250.76, 461.31 218.16 M363.83 354.7 C403.05 309.53, 439.57 267.89, 461.58 242.24 M363.83 354.7 C401.71 311.98, 438.87 267.68, 461.58 242.24 M385.09 354.63 C411.18 323.94, 441.96 292.26, 461.19 267.08 M385.09 354.63 C402.98 336.85, 418.64 316.88, 461.19 267.08 M406.35 354.56 C418.91 338.39, 433.54 324.6, 461.46 291.16 M406.35 354.56 C421.21 336.85, 437.58 318.93, 461.46 291.16 M427.61 354.49 C438.62 343.14, 450.88 327.52, 461.07 316 M427.61 354.49 C437.66 342.39, 447.2 331.64, 461.07 316" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C141.63 1.37, 251.13 0.97, 429.1 0 M32 0 C135.42 0.29, 238.46 0.03, 429.1 0 M429.1 0 C449.24 -0.68, 461.91 12.52, 461.1 32 M429.1 0 C451.69 0.56, 462.24 9.84, 461.1 32 M461.1 32 C460.64 97, 460.31 163.13, 461.1 321.95 M461.1 32 C459.55 135.07, 459.88 236.26, 461.1 321.95 M461.1 321.95 C459.9 342.48, 450.1 355.44, 429.1 353.95 M461.1 321.95 C462.8 343.56, 448.95 354.31, 429.1 353.95 M429.1 353.95 C348.59 353.54, 269.23 352.64, 32 353.95 M429.1 353.95 C314.12 354, 199.36 354.67, 32 353.95 M32 353.95 C10.96 352.39, -0.23 342.35, 0 321.95 M32 353.95 C12.18 352.41, 1.98 344.16, 0 321.95 M0 321.95 C2.17 241.78, 1.77 160.76, 0 32 M0 321.95 C2.17 246.41, 2.06 170.2, 0 32 M0 32 C-0.17 11.5, 10.72 0.15, 32 0 M0 32 C1.15 11.93, 11.78 1.92, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(7727.9612470883885 1982.1568281510845) rotate(0 48.85198211669922 22.5)"><text x="48.85198211669922" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Client</text></g><g stroke-linecap="round" transform="translate(8628.509748716624 1217.0244128889317) rotate(0 147.84557754326488 820.7502334578421)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.26 41.3 C6.88 29.92, 16.4 21.91, 36.34 -0.21 M0.26 41.3 C12.38 27.14, 26.17 13.11, 36.34 -0.21 M0.52 65.38 C22.07 40.31, 44.38 12.65, 56.94 0.47 M0.52 65.38 C12.47 51.63, 25.39 36.86, 56.94 0.47 M0.13 90.22 C25.91 58.16, 53.08 28.18, 78.2 0.41 M0.13 90.22 C31.19 54.3, 60.87 19.28, 78.2 0.41 M0.4 114.3 C23.27 86.95, 43.31 63.63, 99.46 0.34 M0.4 114.3 C37.57 71.65, 73.33 30.79, 99.46 0.34 M0.01 139.13 C38.93 94.24, 78.05 48.49, 120.72 0.27 M0.01 139.13 C35.7 98.94, 71.09 57.86, 120.72 0.27 M0.27 163.22 C29.05 128.49, 58.53 95.11, 141.98 0.2 M0.27 163.22 C56.37 100.22, 111.03 36.4, 141.98 0.2 M0.54 187.3 C53.86 128.13, 107.64 64.84, 163.24 0.13 M0.54 187.3 C41.38 139.69, 83.18 93.34, 163.24 0.13 M0.15 212.13 C45.91 160, 89.75 106.5, 184.5 0.06 M0.15 212.13 C48.99 156.77, 98.48 101.25, 184.5 0.06 M0.42 236.22 C76.78 147.63, 155.48 56.55, 205.11 0.75 M0.42 236.22 C56.49 169.03, 114.03 102.92, 205.11 0.75 M0.03 261.05 C49.47 203.9, 100.22 146.18, 226.37 0.68 M0.03 261.05 C64.85 188.02, 128.82 114.09, 226.37 0.68 M0.29 285.13 C76.31 197.17, 153.51 110.71, 247.63 0.61 M0.29 285.13 C62.77 213.15, 125.28 141.97, 247.63 0.61 M0.56 309.22 C60.37 241.03, 119.56 172.57, 268.89 0.54 M0.56 309.22 C107.53 186.71, 212.49 65.86, 268.89 0.54 M0.17 334.05 C112.66 203.84, 226.49 73.34, 284.9 6.51 M0.17 334.05 C70.58 254.83, 140.28 174.88, 284.9 6.51 M0.44 358.13 C78.21 267.81, 158.54 174.02, 293.7 20.78 M0.44 358.13 C81.76 264.41, 164.01 169.96, 293.7 20.78 M0.05 382.97 C96.61 269.66, 195 158.21, 295.27 43.35 M0.05 382.97 C66.36 303.53, 133.94 226.4, 295.27 43.35 M0.31 407.05 C71.95 326.83, 143.11 244.81, 295.54 67.43 M0.31 407.05 C81.4 314.48, 162.99 220.76, 295.54 67.43 M0.58 431.13 C83.64 336.92, 165.89 243.02, 295.81 91.51 M0.58 431.13 C109.2 306.36, 218.36 181.37, 295.81 91.51 M0.19 455.97 C90.45 349.88, 181.6 246.77, 295.42 116.35 M0.19 455.97 C72.27 372.19, 145.29 288.54, 295.42 116.35 M0.46 480.05 C113.92 350.48, 226.19 221.21, 295.68 140.43 M0.46 480.05 C96.44 371.85, 191.93 261.92, 295.68 140.43 M0.07 504.89 C90.53 400.33, 180.5 296.05, 295.29 165.27 M0.07 504.89 C90.31 400.44, 180.68 295, 295.29 165.27 M0.33 528.97 C80.81 435.65, 161.71 344.64, 295.56 189.35 M0.33 528.97 C98.47 416.46, 196.19 304.96, 295.56 189.35 M0.6 553.05 C115.53 419.76, 231.02 285.77, 295.83 213.43 M0.6 553.05 C94.03 444.15, 187.53 336.16, 295.83 213.43 M0.21 577.89 C105.71 455.42, 210.15 334.54, 295.44 238.27 M0.21 577.89 C99.69 463.74, 198.51 349.63, 295.44 238.27 M0.48 601.97 C103.49 480.21, 209.23 359.83, 295.7 262.35 M0.48 601.97 C110.5 475.24, 220.14 349.17, 295.7 262.35 M0.09 626.81 C98.51 513.74, 196.12 400.12, 295.31 287.19 M0.09 626.81 C77.74 535.88, 156.92 445.29, 295.31 287.19 M0.35 650.89 C96.53 542.32, 192.04 433.38, 295.58 311.27 M0.35 650.89 C92.19 544.59, 183.78 439.88, 295.58 311.27 M0.62 674.97 C84.95 578.87, 167.79 482.44, 295.84 335.35 M0.62 674.97 C105.6 554.94, 208.9 436.4, 295.84 335.35 M0.23 699.81 C72.84 614.32, 147.49 531.2, 295.46 360.19 M0.23 699.81 C62.78 627.57, 125.24 555.64, 295.46 360.19 M0.49 723.89 C108.87 602.15, 216.33 477.01, 295.72 384.27 M0.49 723.89 C60.92 654.36, 119.79 585.46, 295.72 384.27 M0.76 747.97 C65.98 673.14, 132.68 597.55, 295.33 409.1 M0.76 747.97 C91.21 644.43, 181.97 539.89, 295.33 409.1 M0.37 772.81 C95.09 665.57, 187.4 557.05, 295.6 433.19 M0.37 772.81 C95.15 661.17, 191.9 549.65, 295.6 433.19 M0.64 796.89 C107.23 672.42, 217.06 546.84, 295.86 457.27 M0.64 796.89 C78.63 708.37, 155.63 619.74, 295.86 457.27 M0.25 821.72 C110.54 695.88, 219.47 570.21, 295.47 482.1 M0.25 821.72 C67.9 743.4, 135.02 665.8, 295.47 482.1 M0.51 845.81 C101.99 730.9, 202.05 615.88, 295.74 506.19 M0.51 845.81 C84.25 751.74, 165.54 656.97, 295.74 506.19 M0.78 869.89 C98.34 757.02, 196.59 644.79, 295.35 531.02 M0.78 869.89 C88.48 768.2, 175.49 668.31, 295.35 531.02 M0.39 894.72 C65.67 820, 131.75 744.07, 295.62 555.1 M0.39 894.72 C62.53 823.77, 125.06 752.08, 295.62 555.1 M0.66 918.81 C88.12 817.52, 176.11 716.09, 295.88 579.19 M0.66 918.81 C92.3 812.3, 185.84 705.94, 295.88 579.19 M0.27 943.64 C72.17 863.51, 144.46 781.62, 295.49 604.02 M0.27 943.64 C74.13 855.16, 149.5 768.39, 295.49 604.02 M0.53 967.72 C102.05 853.68, 201.99 737.93, 295.76 628.1 M0.53 967.72 C106.62 844.44, 213.4 720.86, 295.76 628.1 M0.8 991.8 C73.84 908.66, 145.13 824.47, 296.03 652.19 M0.8 991.8 C73.52 908.19, 145.95 825.45, 296.03 652.19 M0.41 1016.64 C63.87 945.78, 125.59 874.34, 295.64 677.02 M0.41 1016.64 C91.41 912.23, 181.26 808.86, 295.64 677.02 M0.68 1040.72 C66.75 962.86, 133.72 887.01, 295.9 701.1 M0.68 1040.72 C106.84 919.09, 212.05 798.87, 295.9 701.1 M0.29 1065.56 C73.92 980.1, 149.08 893.33, 295.51 725.94 M0.29 1065.56 C92.33 962.23, 183.98 857.21, 295.51 725.94 M0.55 1089.64 C116.79 956.55, 233.76 821.32, 295.78 750.02 M0.55 1089.64 C61.14 1020.16, 122.37 949.99, 295.78 750.02 M0.82 1113.72 C88.62 1013.33, 174.66 912.31, 296.05 774.1 M0.82 1113.72 C96.38 1003.96, 191.11 893.72, 296.05 774.1 M0.43 1138.56 C93.51 1032.3, 185.63 927.37, 295.66 798.94 M0.43 1138.56 C106.17 1015.28, 214.03 892.02, 295.66 798.94 M0.7 1162.64 C100.24 1046, 200.66 931.96, 295.92 823.02 M0.7 1162.64 C117.14 1028.18, 233.42 894.48, 295.92 823.02 M0.31 1187.48 C105.63 1065.72, 211.35 943.29, 295.53 847.86 M0.31 1187.48 C66.5 1111.37, 134.03 1033.67, 295.53 847.86 M0.57 1211.56 C81.03 1120.35, 159.63 1028.13, 295.8 871.94 M0.57 1211.56 C107.22 1089.1, 213.35 967.87, 295.8 871.94 M0.84 1235.64 C75.93 1149.69, 148.6 1064.03, 296.06 896.02 M0.84 1235.64 C102.22 1119.36, 204.75 1001.96, 296.06 896.02 M0.45 1260.48 C110.63 1136.77, 218.58 1012.06, 295.68 920.86 M0.45 1260.48 C103.82 1142.26, 205.89 1024.62, 295.68 920.86 M0.71 1284.56 C100.15 1169.78, 199.16 1054.2, 295.94 944.94 M0.71 1284.56 C90.01 1179.97, 181.15 1076.3, 295.94 944.94 M0.33 1309.4 C109.67 1183.07, 221.66 1053.75, 295.55 969.78 M0.33 1309.4 C82.94 1214.54, 165.14 1119.56, 295.55 969.78 M0.59 1333.48 C92.66 1229.37, 183.12 1124.19, 295.82 993.86 M0.59 1333.48 C70.05 1252.61, 140.59 1171.88, 295.82 993.86 M0.86 1357.56 C69.88 1276.42, 140.58 1195.75, 296.08 1017.94 M0.86 1357.56 C112.68 1231.79, 223.33 1103.62, 296.08 1017.94 M0.47 1382.4 C79.77 1287.92, 160.74 1194.97, 295.69 1042.78 M0.47 1382.4 C94.12 1273.89, 188.07 1166.03, 295.69 1042.78 M0.73 1406.48 C109.5 1277.42, 220.39 1149.94, 295.96 1066.86 M0.73 1406.48 C70.59 1326.38, 139.58 1245.78, 295.96 1066.86 M0.34 1431.31 C83.55 1333.67, 168.72 1236.66, 295.57 1091.69 M0.34 1431.31 C76.63 1343.8, 152 1257.13, 295.57 1091.69 M0.61 1455.4 C115.49 1323.65, 230.23 1191.87, 295.84 1115.78 M0.61 1455.4 C108.83 1332, 215.59 1208.7, 295.84 1115.78 M0.88 1479.48 C64.87 1402.76, 131.71 1327.46, 296.1 1139.86 M0.88 1479.48 C61.66 1407.01, 124.58 1335.38, 296.1 1139.86 M0.49 1504.31 C106.46 1383.08, 212 1261.13, 295.71 1164.69 M0.49 1504.31 C72.26 1421.35, 144.1 1338.54, 295.71 1164.69 M0.75 1528.4 C88.56 1424.47, 179.04 1323.26, 295.98 1188.78 M0.75 1528.4 C85.57 1432.29, 169.15 1334.97, 295.98 1188.78 M1.02 1552.48 C105.74 1429.92, 211.33 1307.2, 295.59 1213.61 M1.02 1552.48 C78.04 1463.41, 155.12 1374.18, 295.59 1213.61 M0.63 1577.31 C109.01 1451.13, 219.71 1327.23, 295.86 1237.69 M0.63 1577.31 C65.36 1503.17, 128.65 1430.49, 295.86 1237.69 M0.9 1601.39 C101.24 1485.31, 203.37 1370.56, 296.12 1261.78 M0.9 1601.39 C116.63 1467.94, 233.88 1333.24, 296.12 1261.78 M2.47 1623.97 C60.89 1556.91, 121.33 1487.15, 295.73 1286.61 M2.47 1623.97 C88.88 1526.17, 173.19 1429.5, 295.73 1286.61 M12.58 1636.73 C79.65 1560.4, 147.45 1482.15, 296 1310.69 M12.58 1636.73 C100.49 1535.79, 188.94 1434.64, 296 1310.69 M29.91 1641.19 C86.23 1572.5, 145.28 1507.49, 295.61 1335.53 M29.91 1641.19 C91.58 1570.13, 151.99 1500.7, 295.61 1335.53 M51.17 1641.12 C115.51 1566.72, 178.99 1494.16, 295.88 1359.61 M51.17 1641.12 C115.07 1567.01, 180.35 1491.12, 295.88 1359.61 M72.43 1641.05 C153.18 1549.21, 232.66 1455.56, 296.14 1383.69 M72.43 1641.05 C141.45 1561.38, 209.57 1481.77, 296.14 1383.69 M93.69 1640.98 C139.76 1589.47, 183.67 1538.53, 295.75 1408.53 M93.69 1640.98 C135.17 1593.11, 177.84 1544.24, 295.75 1408.53 M114.95 1640.91 C153.44 1599.69, 189.99 1554.68, 296.02 1432.61 M114.95 1640.91 C155.02 1594.42, 195.96 1545.71, 296.02 1432.61 M136.21 1640.84 C197.95 1568.08, 261.61 1498.5, 296.29 1456.69 M136.21 1640.84 C184.46 1585.98, 231.42 1531.58, 296.29 1456.69 M157.47 1640.77 C197.26 1597.84, 234.37 1552.07, 295.9 1481.53 M157.47 1640.77 C192.29 1601.39, 225.87 1561.75, 295.9 1481.53 M178.07 1641.46 C206.83 1610.09, 235.26 1577.66, 296.16 1505.61 M178.07 1641.46 C218.83 1595.39, 259.58 1548.2, 296.16 1505.61 M199.33 1641.39 C228.36 1610.14, 255.12 1577.86, 295.77 1530.45 M199.33 1641.39 C223.83 1611.54, 248.85 1581.34, 295.77 1530.45 M220.59 1641.32 C243.81 1613.76, 267.05 1587.86, 296.04 1554.53 M220.59 1641.32 C237.53 1624.75, 252.3 1605.86, 296.04 1554.53 M241.85 1641.25 C262.97 1619.94, 279.85 1596.33, 296.3 1578.61 M241.85 1641.25 C258.05 1620.88, 275.46 1601.2, 296.3 1578.61 M263.11 1641.18 C274.12 1628.43, 285.93 1614.31, 295.91 1603.45 M263.11 1641.18 C276.11 1626.03, 287.89 1612.68, 295.91 1603.45" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C104.34 -1.53, 179.12 -0.11, 263.69 0 M32 0 C95.85 -1.14, 158.86 -1.15, 263.69 0 M263.69 0 C286.1 0.3, 294.13 10.44, 295.69 32 M263.69 0 C283.95 1.51, 294.15 12.65, 295.69 32 M295.69 32 C295.16 565.99, 294.8 1099.18, 295.69 1609.5 M295.69 32 C293.62 582.83, 293.51 1133.41, 295.69 1609.5 M295.69 1609.5 C296.11 1630.67, 285.86 1641.55, 263.69 1641.5 M295.69 1609.5 C295.86 1631.98, 286.29 1642.62, 263.69 1641.5 M263.69 1641.5 C173.73 1642.3, 86.47 1639.23, 32 1641.5 M263.69 1641.5 C180.66 1641.21, 98.67 1642.09, 32 1641.5 M32 1641.5 C12.65 1640.32, -1.32 1630.86, 0 1609.5 M32 1641.5 C8.57 1640.57, -2.25 1632.36, 0 1609.5 M0 1609.5 C5.1 1095.72, 5.77 580.22, 0 32 M0 1609.5 C4.29 1117.77, 4.02 626.79, 0 32 M0 32 C-1.5 8.79, 9.89 0.32, 32 0 M0 32 C-1.34 9.95, 10.16 -2.09, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8640.167399013793 1925.2746463467774) rotate(0 136.18792724609375 112.5)"><text x="136.18792724609375" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">API GATEWAY</text><text x="136.18792724609375" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-rate limitng</text><text x="136.18792724609375" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-authentication</text><text x="136.18792724609375" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-tls termination</text><text x="136.18792724609375" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-ROUTING</text></g><g stroke-linecap="round" transform="translate(9806.438883141964 1114.997636680484) rotate(0 290.4853524399996 122.80900411582479)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.26 41.3 C13.51 29.81, 22.09 14.25, 36.34 -0.21 M0.26 41.3 C12.68 27.89, 24.27 12.24, 36.34 -0.21 M0.52 65.38 C15 46.54, 34.4 27.42, 57.6 -0.28 M0.52 65.38 C21.26 41.26, 44.67 15.8, 57.6 -0.28 M0.13 90.22 C30.09 56.97, 57.57 21.34, 78.2 0.41 M0.13 90.22 C18.77 69.03, 36.34 50.14, 78.2 0.41 M0.4 114.3 C19.82 88.85, 41.66 68.06, 99.46 0.34 M0.4 114.3 C23.63 87.93, 47.23 61.69, 99.46 0.34 M0.66 138.38 C30.93 106, 60.53 71.77, 120.72 0.27 M0.66 138.38 C46.64 86.67, 91.86 31.97, 120.72 0.27 M0.27 163.22 C45.83 110.94, 88.41 60.31, 141.98 0.2 M0.27 163.22 C38.06 120.01, 73.78 77.63, 141.98 0.2 M0.54 187.3 C38.85 144.22, 79.9 99.94, 163.24 0.13 M0.54 187.3 C35 149.06, 69.79 108.59, 163.24 0.13 M0.81 211.38 C71.49 132.81, 140.84 52.04, 184.5 0.06 M0.81 211.38 C56.09 148.98, 110.99 85.94, 184.5 0.06 M4.35 231.69 C71.61 154.33, 140.9 74.21, 205.76 -0.01 M4.35 231.69 C59.47 168.63, 112.46 108.05, 205.76 -0.01 M15.77 242.94 C94.67 150.96, 173.97 61.54, 227.02 -0.08 M15.77 242.94 C73.16 173.36, 133.09 104.73, 227.02 -0.08 M33.75 246.64 C120.03 150.49, 203.37 52.41, 248.28 -0.15 M33.75 246.64 C107.03 164.53, 179.6 81.35, 248.28 -0.15 M55.01 246.57 C128.78 160.07, 202.89 76.9, 269.54 -0.22 M55.01 246.57 C127.7 162.22, 202.22 77.24, 269.54 -0.22 M76.27 246.51 C158.34 151.16, 242.68 55.85, 290.8 -0.28 M76.27 246.51 C154.71 155.49, 233.25 66.64, 290.8 -0.28 M97.53 246.44 C166.73 168.88, 235.63 90.58, 311.41 0.4 M97.53 246.44 C161.6 173.03, 226.46 99.23, 311.41 0.4 M118.79 246.37 C186.43 166.37, 256.26 85.97, 332.67 0.33 M118.79 246.37 C189.93 165.91, 260.03 84.7, 332.67 0.33 M140.05 246.3 C185.59 195.33, 231.03 142.11, 353.93 0.26 M140.05 246.3 C219.37 155.99, 298.13 64.22, 353.93 0.26 M161.31 246.23 C235.03 159.59, 311.65 71.14, 375.19 0.19 M161.31 246.23 C234.42 162.24, 308.19 76.59, 375.19 0.19 M182.57 246.16 C252.74 169.6, 318.92 90.59, 396.45 0.12 M182.57 246.16 C234.94 185.38, 289.8 122.45, 396.45 0.12 M203.83 246.09 C255.34 184.4, 304.46 125.88, 417.71 0.06 M203.83 246.09 C284.93 150.23, 367.54 55.78, 417.71 0.06 M225.09 246.02 C274.01 191.44, 320.64 137.42, 438.97 -0.01 M225.09 246.02 C277.5 184.98, 330.3 123.95, 438.97 -0.01 M246.35 245.95 C308.6 170.73, 374.56 97.97, 460.23 -0.08 M246.35 245.95 C322.4 158.64, 398.22 73.05, 460.23 -0.08 M266.96 246.64 C329.25 176.39, 388.77 106.31, 481.49 -0.15 M266.96 246.64 C340.25 161.53, 413.43 77.5, 481.49 -0.15 M288.22 246.57 C345.69 179.61, 403.44 110.46, 502.75 -0.22 M288.22 246.57 C372.32 149.63, 456.65 53.04, 502.75 -0.22 M309.48 246.5 C382.66 162.33, 455.13 76.23, 523.35 0.47 M309.48 246.5 C375.25 167.34, 443.39 89.97, 523.35 0.47 M330.74 246.43 C380.25 190.81, 431.32 131.64, 544.61 0.4 M330.74 246.43 C413.87 151.07, 496.42 55.18, 544.61 0.4 M352 246.36 C401.76 189.51, 449.75 134.06, 563.91 2.59 M352 246.36 C405.29 186.26, 458.12 125.88, 563.91 2.59 M373.26 246.29 C430.9 179.75, 489.91 113.43, 576.64 12.33 M373.26 246.29 C433.76 179.53, 491.33 110.98, 576.64 12.33 M394.52 246.23 C445.15 190.16, 491.47 135.16, 580.84 31.89 M394.52 246.23 C468.86 161.31, 543.51 76.12, 580.84 31.89 M415.78 246.16 C460.11 194.02, 504.55 144.6, 580.45 56.72 M415.78 246.16 C473.8 177.57, 531.27 111.31, 580.45 56.72 M437.04 246.09 C481.27 191.68, 527.46 138.83, 580.72 80.81 M437.04 246.09 C484.92 192.29, 530.46 137.78, 580.72 80.81 M458.3 246.02 C488.69 210.02, 521.62 172.96, 580.98 104.89 M458.3 246.02 C494.66 204.23, 532.26 160.33, 580.98 104.89 M479.56 245.95 C520.06 200.58, 560.5 153.79, 580.59 129.72 M479.56 245.95 C519.71 201.45, 557.55 156.62, 580.59 129.72 M500.16 246.63 C519.53 224.02, 541.57 197.8, 580.86 153.81 M500.16 246.63 C517.66 227.37, 533.98 209.03, 580.86 153.81 M521.42 246.57 C534.75 229.51, 547.17 216.25, 581.13 177.89 M521.42 246.57 C534.57 232.06, 546.84 217.21, 581.13 177.89 M542.69 246.5 C552.02 233.18, 565.42 220.26, 580.74 202.72 M542.69 246.5 C555.28 230.2, 568.77 215.37, 580.74 202.72 M568.54 241.14 C570.9 238.77, 574.51 236.5, 577.72 230.58 M568.54 241.14 C571.02 238.45, 573.54 236.03, 577.72 230.58" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C152.49 2.45, 274.19 2.43, 548.97 0 M32 0 C147.1 -1.1, 262.07 -0.55, 548.97 0 M548.97 0 C568.94 1.9, 580.06 11.18, 580.97 32 M548.97 0 C572.3 -2.14, 581.93 9.73, 580.97 32 M580.97 32 C578.51 93.88, 579.6 154.56, 580.97 213.62 M580.97 32 C580.1 95.1, 580.41 155.97, 580.97 213.62 M580.97 213.62 C581.55 233.03, 572.11 245.5, 548.97 245.62 M580.97 213.62 C580.15 236.84, 570.75 245.85, 548.97 245.62 M548.97 245.62 C396 243.2, 244.84 243.36, 32 245.62 M548.97 245.62 C406.01 246.02, 263.35 246.08, 32 245.62 M32 245.62 C12.55 244.52, -0.66 235.77, 0 213.62 M32 245.62 C10.76 246.22, -1.9 233.23, 0 213.62 M0 213.62 C-0.53 165.49, 1.87 118.54, 0 32 M0 213.62 C-2.1 144.54, -2.06 74.34, 0 32 M0 32 C-0.37 12.54, 11.52 0.03, 32 0 M0 32 C-0.86 10.4, 10.43 -1.83, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(9876.946299790947 1192.8066407963124) rotate(0 219.97793579101562 45)"><text x="219.97793579101562" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tag CRUD (Management)</text><text x="219.97793579101562" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Service </text></g><g stroke-linecap="round" transform="translate(9855.040728211807 2450.5750902803775) rotate(0 267.5916127851424 158.01819887371676)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M4.85 36.01 C14.39 21.75, 25.93 10.15, 34.37 2.05 M4.85 36.01 C12.23 28.35, 18.12 21.29, 34.37 2.05 M4.46 60.85 C17.1 46.74, 29.91 31.16, 55.63 1.98 M4.46 60.85 C18.69 42.67, 35.2 25.94, 55.63 1.98 M4.72 84.93 C29.91 54.59, 57.35 27.75, 76.89 1.91 M4.72 84.93 C26.04 61.09, 45.74 37.27, 76.89 1.91 M4.99 109.01 C37.67 72.15, 69.8 35.63, 98.15 1.85 M4.99 109.01 C29.69 80.16, 54.43 49.72, 98.15 1.85 M4.6 133.85 C48.63 81.53, 95.63 28.68, 119.41 1.78 M4.6 133.85 C43.9 88.59, 82.69 41.99, 119.41 1.78 M4.87 157.93 C45.73 107.22, 90.09 58.82, 140.67 1.71 M4.87 157.93 C36.44 122.72, 68.87 85.13, 140.67 1.71 M4.48 182.77 C66.12 112.37, 124.89 42.52, 161.28 2.39 M4.48 182.77 C41.52 140.88, 77.16 99.73, 161.28 2.39 M4.74 206.85 C48.8 157.06, 93.94 106.02, 182.54 2.32 M4.74 206.85 C55.44 148.6, 106.69 90.5, 182.54 2.32 M5.01 230.93 C64.65 166.31, 119.98 97.93, 203.8 2.26 M5.01 230.93 C58.2 170.75, 108.8 111.72, 203.8 2.26 M4.62 255.77 C92.42 154.77, 181.02 54.06, 225.06 2.19 M4.62 255.77 C63.38 186.71, 122.68 119.19, 225.06 2.19 M0.95 284.38 C87.59 182.48, 173.21 83.77, 246.32 2.12 M0.95 284.38 C78.35 192.92, 157.06 102.47, 246.32 2.12 M5.15 303.93 C92.25 205.33, 176.27 105.9, 267.58 2.05 M5.15 303.93 C72.4 226.58, 140.08 148.95, 267.58 2.05 M16.57 315.18 C98.52 221.04, 181.85 124.48, 288.84 1.98 M16.57 315.18 C124.29 193.43, 230.9 70.71, 288.84 1.98 M34.55 318.89 C142.42 196.62, 247.75 74.06, 310.1 1.91 M34.55 318.89 C104.61 238.02, 174.79 157.07, 310.1 1.91 M55.81 318.82 C112.96 254.09, 168.7 190.43, 331.36 1.84 M55.81 318.82 C119.38 245.71, 181.97 173.98, 331.36 1.84 M77.07 318.75 C136.44 250.68, 195.56 181.9, 352.62 1.77 M77.07 318.75 C157.26 224.25, 239.62 130.17, 352.62 1.77 M98.33 318.68 C191.99 207.47, 287.34 98.52, 373.88 1.7 M98.33 318.68 C174.47 232.58, 250.79 145.5, 373.88 1.7 M119.59 318.61 C190.54 239.69, 260.31 160.15, 394.48 2.39 M119.59 318.61 C218.43 206.63, 317.26 92.91, 394.48 2.39 M140.85 318.54 C245.19 199.12, 348.81 81.39, 415.74 2.32 M140.85 318.54 C239.01 204.78, 336.55 92.65, 415.74 2.32 M162.11 318.47 C223.44 248, 283.53 178.87, 437 2.25 M162.11 318.47 C226.49 242.24, 293.4 165.58, 437 2.25 M183.37 318.41 C289.66 198.49, 392.75 77.38, 458.26 2.18 M183.37 318.41 C286.69 198.11, 391.59 78.83, 458.26 2.18 M204.63 318.34 C271.74 242.62, 337.96 165.48, 479.52 2.11 M204.63 318.34 C280.48 229.22, 357.28 140.43, 479.52 2.11 M225.89 318.27 C331.25 195.53, 436.76 73.64, 500.78 2.04 M225.89 318.27 C288.95 244.94, 353.5 171.95, 500.78 2.04 M247.15 318.2 C336.22 219.42, 422.83 120.77, 518.11 6.5 M247.15 318.2 C315.51 239.96, 382.09 163.95, 518.11 6.5 M267.76 318.88 C335.42 239.63, 405.36 159.15, 532.81 13.98 M267.76 318.88 C344.26 229.31, 421.45 140.68, 532.81 13.98 M289.02 318.82 C354.62 244.14, 418.65 169.09, 537.01 33.53 M289.02 318.82 C349.38 251.3, 409.78 182.3, 537.01 33.53 M310.28 318.75 C360.71 258.55, 411.65 203.01, 537.27 57.62 M310.28 318.75 C380.93 239.02, 451.85 158.41, 537.27 57.62 M331.54 318.68 C408.98 230.23, 485.2 143.81, 536.88 82.45 M331.54 318.68 C413.91 224.93, 495.43 131.37, 536.88 82.45 M352.8 318.61 C409.13 249.91, 468.43 184.77, 537.15 106.53 M352.8 318.61 C413.48 249.48, 472.77 179.53, 537.15 106.53 M374.06 318.54 C426.78 257.68, 482.48 196.88, 536.76 131.37 M374.06 318.54 C437.12 245.63, 499.48 172.96, 536.76 131.37 M395.32 318.47 C444.35 260.68, 490.9 207.33, 537.03 155.45 M395.32 318.47 C447.93 259.62, 498.52 200.12, 537.03 155.45 M416.58 318.4 C455.13 275.79, 493.31 234.07, 537.29 179.53 M416.58 318.4 C452.8 275.93, 488.87 233.37, 537.29 179.53 M437.84 318.33 C471.81 278.68, 506.75 240.23, 536.9 204.37 M437.84 318.33 C471.56 282.61, 503.03 244.53, 536.9 204.37 M459.1 318.26 C480.68 290.19, 505.19 266.45, 537.17 228.45 M459.1 318.26 C488.77 282.91, 519.33 249.06, 537.17 228.45 M480.36 318.19 C496.08 298.79, 514.75 279.19, 536.78 253.29 M480.36 318.19 C498.82 299.69, 513.99 279.25, 536.78 253.29 M503.59 315.86 C513.89 303.67, 526.81 289.68, 537.05 277.37 M503.59 315.86 C514.43 305.44, 524.8 293.76, 537.05 277.37" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C185.72 2.19, 339.5 2.12, 503.18 0 M32 0 C156.27 0.1, 280.43 0.21, 503.18 0 M503.18 0 C523.6 -1.5, 534.11 11.36, 535.18 32 M503.18 0 C523.25 1.46, 534.3 12.46, 535.18 32 M535.18 32 C536.23 101.19, 533.84 168.75, 535.18 284.04 M535.18 32 C534.99 111.65, 535.33 190.58, 535.18 284.04 M535.18 284.04 C535.33 304.67, 525.21 317.09, 503.18 316.04 M535.18 284.04 C535.75 306.65, 526.6 314.62, 503.18 316.04 M503.18 316.04 C320.56 316.36, 137.77 316.97, 32 316.04 M503.18 316.04 C332.4 314.65, 162.36 314.72, 32 316.04 M32 316.04 C11.95 316.23, -0.41 306.78, 0 284.04 M32 316.04 C11.11 315.4, 1.29 306.9, 0 284.04 M0 284.04 C0.9 214.14, -0.58 142.45, 0 32 M0 284.04 C1.85 195.26, 1.35 107.9, 0 32 M0 32 C-1.02 11.23, 11.06 -0.89, 32 0 M0 32 C-1.53 12.36, 12.56 -1.98, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(9968.62440642664 2586.0932891540942) rotate(0 154.0079345703125 22.5)"><text x="154.0079345703125" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tag query service</text></g><g mask="url(#mask-MW2ogFR7p6l-QrieojacU)" stroke-linecap="round"><g transform="translate(8925.536615453973 1875.596032612215) rotate(0 434.12456224869766 -295.0460049246576)"><path d="M-0.98 -0.14 C143.76 -98.33, 724.15 -490.03, 869.23 -588.39 M0.71 -1.26 C145.25 -99.83, 723.72 -491.92, 868.45 -589.95" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8925.536615453973 1875.596032612215) rotate(0 434.12456224869766 -295.0460049246576)"><path d="M13.7 -20.38 C8.24 -12.59, 4.92 -4.75, -0.98 -0.14 M13.7 -20.38 C9.97 -15.12, 7.76 -11.35, -0.98 -0.14" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8925.536615453973 1875.596032612215) rotate(0 434.12456224869766 -295.0460049246576)"><path d="M23.27 -6.21 C14.25 -3.66, 7.44 -0.97, -0.98 -0.14 M23.27 -6.21 C17.29 -4.23, 12.89 -3.71, -0.98 -0.14" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8925.536615453973 1875.596032612215) rotate(0 434.12456224869766 -295.0460049246576)"><path d="M853.8 -569.69 C858.77 -576.4, 866.12 -583.29, 868.45 -589.95 M853.8 -569.69 C856.63 -573.6, 861.14 -579.11, 868.45 -589.95" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8925.536615453973 1875.596032612215) rotate(0 434.12456224869766 -295.0460049246576)"><path d="M844.21 -583.85 C852.75 -585.33, 863.59 -587.07, 868.45 -589.95 M844.21 -583.85 C849.29 -584.48, 856 -586.74, 868.45 -589.95" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask id="mask-MW2ogFR7p6l-QrieojacU"><rect x="0" y="0" fill="#fff" width="9894.43888314196" height="2565.050996941456"></rect><rect x="9101.579820831172" y="1535.8685504475943" fill="#000" width="516.8158569335938" height="90" opacity="1"></rect></mask><g transform="translate(9101.57982083117 1535.8685504475943) rotate(0 258.08135687150116 44.68147723996299)"><text x="258.4079284667969" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Create, Read, Update, Delete</text><text x="258.4079284667969" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tags()</text></g><g stroke-linecap="round" transform="translate(9842.995365805 1752.673180779624) rotate(0 280.81998775815646 136.89150193211754)"><path d="M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M7.86 8.16 C7.86 8.16, 7.86 8.16, 7.86 8.16 M0.91 40.54 C15.39 25.73, 26.17 12.19, 36.34 -0.21 M0.91 40.54 C9.86 29.66, 19.64 20.02, 36.34 -0.21 M1.18 64.62 C19.13 46.69, 35.83 23.25, 57.6 -0.28 M1.18 64.62 C22.59 40.43, 44.38 16.89, 57.6 -0.28 M0.79 89.46 C18.42 67.09, 39.52 43.21, 78.2 0.41 M0.79 89.46 C29.65 56.21, 59.05 21.57, 78.2 0.41 M1.05 113.54 C31.15 75.72, 61.74 42.68, 99.46 0.34 M1.05 113.54 C38.95 70.19, 74.44 28.3, 99.46 0.34 M0.66 138.38 C37.38 95.86, 72.92 57.41, 120.72 0.27 M0.66 138.38 C31.93 102.65, 61.04 69.28, 120.72 0.27 M0.93 162.46 C54.94 98.59, 112.75 33.15, 141.98 0.2 M0.93 162.46 C45.49 113.23, 89.22 62.62, 141.98 0.2 M0.54 187.3 C43.66 137.17, 87.73 86.97, 163.24 0.13 M0.54 187.3 C39.75 141.1, 79.34 94.84, 163.24 0.13 M0.81 211.38 C42.38 164.82, 80.58 119.69, 184.5 0.06 M0.81 211.38 C66.32 136.57, 131.78 60.76, 184.5 0.06 M0.42 236.22 C73.54 151.89, 148.25 66.78, 205.76 -0.01 M0.42 236.22 C59.54 169.34, 118.73 100.37, 205.76 -0.01 M3.31 257.28 C87.41 158.77, 171.94 63.35, 227.02 -0.08 M3.31 257.28 C67.1 182.03, 131.7 108.4, 227.02 -0.08 M13.42 270.04 C74.25 199.77, 133.46 130.56, 248.28 -0.15 M13.42 270.04 C89.43 181.4, 165.65 92.17, 248.28 -0.15 M31.4 273.74 C107.4 186.98, 182.12 100.53, 269.54 -0.22 M31.4 273.74 C117.25 177.38, 201.66 79.78, 269.54 -0.22 M52 274.43 C112.89 206.9, 172.86 138.46, 290.8 -0.28 M52 274.43 C107.34 209.87, 164.21 144.77, 290.8 -0.28 M73.26 274.36 C125 216.06, 173.62 159.32, 311.41 0.4 M73.26 274.36 C168.06 167.32, 261.24 60.54, 311.41 0.4 M94.52 274.29 C160.35 194.1, 229.04 116.06, 332.67 0.33 M94.52 274.29 C173.08 183.74, 252.5 92.21, 332.67 0.33 M115.78 274.22 C187.67 193.69, 260.16 111.32, 353.93 0.26 M115.78 274.22 C190.58 189.46, 264.58 104.18, 353.93 0.26 M137.04 274.15 C216.49 181.5, 296.6 89.22, 375.19 0.19 M137.04 274.15 C200.14 203.98, 261.95 132.9, 375.19 0.19 M158.3 274.08 C241.17 181.39, 323.66 86.92, 396.45 0.12 M158.3 274.08 C208.7 214.28, 260.8 155.29, 396.45 0.12 M179.56 274.02 C236.71 205.69, 297.84 137.24, 417.71 0.06 M179.56 274.02 C251.78 193.22, 321.79 111.45, 417.71 0.06 M200.82 273.95 C284.72 176, 369.1 78.56, 438.97 -0.01 M200.82 273.95 C272.48 192.99, 341.5 113.61, 438.97 -0.01 M222.08 273.88 C286.2 201.2, 350.22 127.82, 460.23 -0.08 M222.08 273.88 C281.8 203.9, 342.26 133.49, 460.23 -0.08 M243.34 273.81 C311.93 194.34, 378.95 117.62, 481.49 -0.15 M243.34 273.81 C314.77 192.59, 385.79 109.96, 481.49 -0.15 M263.94 274.49 C342.07 185.64, 419.47 96.44, 502.75 -0.22 M263.94 274.49 C352.85 171.9, 443.59 68.96, 502.75 -0.22 M285.21 274.43 C361.4 184.54, 440.22 96.08, 523.35 0.47 M285.21 274.43 C352.52 195.5, 420.76 117.8, 523.35 0.47 M306.47 274.36 C389.28 176.31, 475.15 80.34, 542.65 2.66 M306.47 274.36 C364.9 209.55, 420.78 144.6, 542.65 2.66 M327.73 274.29 C376.91 216.93, 425.73 161.73, 556.03 11.65 M327.73 274.29 C392.72 199.88, 458.25 125.15, 556.03 11.65 M348.99 274.22 C429.15 183.06, 508.84 90.97, 561.55 29.69 M348.99 274.22 C404.5 209.75, 458.35 148.05, 561.55 29.69 M370.25 274.15 C434.64 198.44, 501.19 124.22, 561.82 53.77 M370.25 274.15 C408.26 227.47, 448.6 181.18, 561.82 53.77 M391.51 274.08 C457.94 195.94, 526.24 118.15, 562.08 77.86 M391.51 274.08 C453.61 203.19, 515.47 130.87, 562.08 77.86 M412.77 274.01 C446.53 236.06, 478.71 200.39, 561.69 102.69 M412.77 274.01 C464.17 212.74, 517.69 152.55, 561.69 102.69 M434.03 273.94 C475.41 224.94, 520.09 177.21, 561.96 126.77 M434.03 273.94 C477.31 224.48, 523.23 174.26, 561.96 126.77 M455.29 273.87 C498.2 223.11, 538.89 176.3, 562.22 150.86 M455.29 273.87 C489.27 238.37, 519.43 201.03, 562.22 150.86 M476.55 273.8 C497.87 247.85, 519.5 220.03, 561.83 175.69 M476.55 273.8 C502.1 244.36, 527.67 215.07, 561.83 175.69 M497.15 274.49 C511.17 257.91, 524.87 244.26, 562.1 199.77 M497.15 274.49 C509.91 259.16, 523.87 242.41, 562.1 199.77 M518.41 274.42 C534.95 255.23, 553.7 235.39, 561.71 224.61 M518.41 274.42 C533.66 255.87, 551.16 236.62, 561.71 224.61 M540.98 272.84 C550.62 264.9, 555.39 256.47, 561.32 249.45 M540.98 272.84 C548.63 264.93, 554.12 257.35, 561.32 249.45" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M32 0 C152.49 -0.7, 273.97 -0.86, 529.64 0 M32 0 C137.65 -1.73, 242.96 -1.7, 529.64 0 M529.64 0 C550.22 -1.85, 561.94 11.21, 561.64 32 M529.64 0 C550.21 -0.24, 560.36 8.7, 561.64 32 M561.64 32 C561.7 90.39, 561.75 148.49, 561.64 241.78 M561.64 32 C560.72 103.11, 561.33 175.84, 561.64 241.78 M561.64 241.78 C563.16 264.43, 552.59 275.28, 529.64 273.78 M561.64 241.78 C562.41 263.58, 551.18 274.27, 529.64 273.78 M529.64 273.78 C348.8 273.81, 167.48 272.91, 32 273.78 M529.64 273.78 C415.71 273.19, 302.69 272.87, 32 273.78 M32 273.78 C12.46 273.67, -0.15 261.62, 0 241.78 M32 273.78 C8.66 274.89, 0.72 264.83, 0 241.78 M0 241.78 C-3.31 158.24, -1.17 77.36, 0 32 M0 241.78 C-0.04 178.2, 0.58 115.59, 0 32 M0 32 C0.22 11.77, 11.56 -1.7, 32 0 M0 32 C0.87 10.27, 9.24 1.18, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(9884.271438768232 1844.5646827117453) rotate(0 239.54391479492188 45)"><text x="239.54391479492188" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tagging Service (entity-to-</text><text x="239.54391479492188" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag)</text></g><g mask="url(#mask-KBUJfmbqA4aUYQa_McSeP)" stroke-linecap="round"><g transform="translate(8927.739248989215 1973.0225243904351) rotate(0 459.33845539244885 -7.511339878114086)"><path d="M0.27 0.56 C153.2 -1.67, 764.46 -11.22, 917.55 -13.85 M-1.05 -0.19 C152.25 -2.73, 766.52 -13.24, 919.73 -15.58" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8927.739248989215 1973.0225243904351) rotate(0 459.33845539244885 -7.511339878114086)"><path d="M23.62 -8.35 C17.66 -7.36, 11.08 -2.63, 0.27 0.56 M23.62 -8.35 C18.76 -6.91, 12.48 -3.99, 0.27 0.56" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8927.739248989215 1973.0225243904351) rotate(0 459.33845539244885 -7.511339878114086)"><path d="M23.89 8.75 C17.92 4.72, 11.25 4.43, 0.27 0.56 M23.89 8.75 C19.05 5.97, 12.69 4.67, 0.27 0.56" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8927.739248989215 1973.0225243904351) rotate(0 459.33845539244885 -7.511339878114086)"><path d="M896.38 -6.65 C904.21 -11.01, 911.35 -11.52, 919.73 -15.58 M896.38 -6.65 C903.14 -9.9, 908.38 -11.39, 919.73 -15.58" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8927.739248989215 1973.0225243904351) rotate(0 459.33845539244885 -7.511339878114086)"><path d="M896.1 -23.75 C903.95 -23.08, 911.17 -18.57, 919.73 -15.58 M896.1 -23.75 C902.84 -22.78, 908.15 -20.05, 919.73 -15.58" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask id="mask-KBUJfmbqA4aUYQa_McSeP"><rect x="0" y="0" fill="#fff" width="9946.29593104058" height="2087.5968990588444"></rect><rect x="9184.355663745368" y="1920.7353370562341" fill="#000" width="405.3238525390625" height="90" opacity="1"></rect></mask><g transform="translate(9184.355663745366 1920.7353370562341) rotate(0 202.7220406362967 44.77584745608692)"><text x="202.66192626953125" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">attach, detach Tags(),</text><text x="202.66192626953125" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">getTagsOnAEntity()</text></g><g mask="url(#mask-tgcrNQ2RnBErnGI94LV4Y)" stroke-linecap="round"><g transform="translate(8916.545198282369 2182.7575657780544) rotate(0 470.17649881757643 180.73851508710504)"><path d="M-0.28 -0.86 C156.6 59.1, 783.86 300.51, 940.64 360.74 M1.77 1.3 C158.59 61.39, 783.6 302.25, 939.92 362.34" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8916.545198282369 2182.7575657780544) rotate(0 470.17649881757643 180.73851508710504)"><path d="M24.71 -0.42 C17.17 0.15, 12.67 -0.41, -0.28 -0.86 M24.71 -0.42 C16.91 -0.04, 10.18 -0.42, -0.28 -0.86" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8916.545198282369 2182.7575657780544) rotate(0 470.17649881757643 180.73851508710504)"><path d="M18.58 15.55 C12.4 12.22, 9.4 7.77, -0.28 -0.86 M18.58 15.55 C12.46 11.19, 7.53 6.12, -0.28 -0.86" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8916.545198282369 2182.7575657780544) rotate(0 470.17649881757643 180.73851508710504)"><path d="M914.92 361.88 C919.6 362.78, 927.32 362.44, 939.92 362.34 M914.92 361.88 C921.81 362.2, 929.77 362.09, 939.92 362.34" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8916.545198282369 2182.7575657780544) rotate(0 470.17649881757643 180.73851508710504)"><path d="M921.06 345.92 C924.37 350.7, 930.59 354.27, 939.92 362.34 M921.06 345.92 C926.26 350.97, 932.42 355.55, 939.92 362.34" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask id="mask-tgcrNQ2RnBErnGI94LV4Y"><rect x="0" y="0" fill="#fff" width="9956.74259014762" height="2643.395581798919"></rect><rect x="9102.549961109526" y="2295.576573788494" fill="#000" width="568.1878662109375" height="135" opacity="1"></rect></mask><g transform="translate(9102.549961109526 2295.576573788494) rotate(0 284.1717359904196 67.91950707666547)"><text x="284.09393310546875" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">getEntitiesByATAG(),</text><text x="284.09393310546875" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">getTopKTags(),</text><text x="284.09393310546875" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">AutoComplete()/getSuggetsion()</text></g><g stroke-linecap="round" transform="translate(10961.455639006308 1643.7520186375332) rotate(0 227.99555037227128 215.0343296221763)"><path d="M42.58 91.34 C42.58 91.34, 42.58 91.34, 42.58 91.34 M42.58 91.34 C42.58 91.34, 42.58 91.34, 42.58 91.34 M12.01 150.89 C47.46 106.85, 85.53 66.12, 116.98 30.14 M12.01 150.89 C40.04 117.84, 68.58 84.9, 116.98 30.14 M4.4 184.03 C63.19 116.73, 121.45 47.46, 150.7 15.73 M4.4 184.03 C45.16 137.8, 83.82 93.56, 150.7 15.73 M2.04 211.13 C54.04 151.4, 101.78 94.17, 179.18 7.36 M2.04 211.13 C69.84 130.8, 138.52 53.16, 179.18 7.36 M3.62 233.7 C49.69 178.25, 96.29 125.56, 204.38 2.76 M3.62 233.7 C62.86 164.9, 122.09 97.02, 204.38 2.76 M5.86 255.52 C49.9 203.57, 93.88 151, 226.29 1.94 M5.86 255.52 C59.16 194.15, 111.93 132.63, 226.29 1.94 M11.37 273.56 C85.33 185.94, 161.37 99.49, 248.86 0.36 M11.37 273.56 C86.02 187.28, 160.91 101.7, 248.86 0.36 M16.89 291.61 C105.83 189.34, 195.28 87.06, 266.19 4.82 M16.89 291.61 C107.74 185.59, 199.3 80.28, 266.19 4.82 M23.06 308.9 C120.99 198.01, 216.71 88.55, 283.51 9.28 M23.06 308.9 C93.01 228.45, 162.88 148.58, 283.51 9.28 M32.51 322.41 C135.7 203.04, 238.99 85.95, 301.49 12.98 M32.51 322.41 C96.03 251.95, 158.29 180.31, 301.49 12.98 M41.3 336.68 C101.42 264.61, 164.33 193.77, 316.85 19.7 M41.3 336.68 C115.79 251.67, 189.68 167.02, 316.85 19.7 M50.75 350.2 C111 278.37, 172.34 209.25, 332.2 26.43 M50.75 350.2 C141.55 245.98, 232.98 140.24, 332.2 26.43 M62.17 361.45 C172.18 234.7, 280.71 108.1, 346.9 33.91 M62.17 361.45 C152.36 256.98, 244 152.21, 346.9 33.91 M74.9 371.19 C183.2 246.75, 293.06 121.61, 361.6 41.38 M74.9 371.19 C157.34 278.77, 238.19 184.64, 361.6 41.38 M86.98 381.69 C168.12 290.66, 247.08 198.95, 373.68 51.88 M86.98 381.69 C144.72 314.57, 203.5 247.35, 373.68 51.88 M99.71 391.43 C185.1 294.77, 269.21 198.34, 386.41 61.62 M99.71 391.43 C206.07 270.16, 310.27 149.84, 386.41 61.62 M114.41 398.91 C222.98 272.72, 330.35 148.14, 398.48 72.12 M114.41 398.91 C226.17 272.9, 337.38 145.12, 398.48 72.12 M129.11 406.39 C229.83 289.93, 332.23 172.54, 408.59 84.88 M129.11 406.39 C233.13 286.28, 336.65 167.13, 408.59 84.88 M143.81 413.87 C230.21 314.8, 317.63 213.87, 418.04 98.4 M143.81 413.87 C233.58 312.98, 322.56 210.6, 418.04 98.4 M160.48 419.08 C238.03 326.76, 316.96 238.74, 426.84 112.67 M160.48 419.08 C247.63 318.29, 333.88 219.15, 426.84 112.67 M178.46 422.78 C263.77 322.3, 350.67 224.41, 435.63 126.94 M178.46 422.78 C268.02 322.31, 355.88 221.72, 435.63 126.94 M195.78 427.24 C287.47 322.34, 381.33 214.62, 441.15 144.98 M195.78 427.24 C290.53 316.84, 386 207.53, 441.15 144.98 M215.07 429.44 C272.26 362.14, 331.37 295.85, 447.32 162.27 M215.07 429.44 C296.95 332.99, 380.03 238.36, 447.32 162.27 M236.99 428.61 C280.89 377.58, 325.24 327.61, 452.18 181.07 M236.99 428.61 C314.65 341.13, 391.52 253, 452.18 181.07 M258.25 428.55 C315.06 362.33, 373.83 293.73, 453.1 204.4 M258.25 428.55 C329.6 346.14, 400.64 264.57, 453.1 204.4 M284.1 423.19 C341.88 356.27, 400.63 288.01, 454.02 227.72 M284.1 423.19 C343.91 353.7, 404.74 285.09, 454.02 227.72 M312.58 414.82 C349.12 370.9, 386.27 330.48, 450.35 256.33 M312.58 414.82 C359.94 359.16, 408.08 303.79, 450.35 256.33 M353.52 392.11 C377.99 365.8, 401.4 334.92, 442.75 289.47 M353.52 392.11 C385.06 355.57, 416.4 320.75, 442.75 289.47" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M188.65 3.79 C206.52 -2.72, 228.88 -1.36, 248.51 0.39 C268.13 2.13, 287.85 7.74, 306.39 14.26 C324.94 20.78, 343.52 29.02, 359.79 39.5 C376.05 49.97, 391.53 62.77, 403.97 77.11 C416.4 91.44, 426.38 108.69, 434.41 125.5 C442.45 142.32, 448.88 159.68, 452.17 177.99 C455.46 196.31, 455.78 216.79, 454.13 235.38 C452.49 253.96, 449 272.09, 442.31 289.52 C435.61 306.95, 425.23 324.96, 413.97 339.95 C402.7 354.95, 389.96 367.68, 374.74 379.49 C359.52 391.3, 340.6 402.73, 322.66 410.8 C304.72 418.86, 286.43 424.92, 267.11 427.9 C247.79 430.89, 226.53 430.63, 206.75 428.71 C186.98 426.8, 166.72 422.9, 148.44 416.42 C130.16 409.95, 113.06 400.46, 97.07 389.86 C81.07 379.25, 65.09 366.74, 52.47 352.77 C39.85 338.81, 29.39 323.04, 21.34 306.07 C13.3 289.11, 7.52 269.47, 4.19 250.99 C0.85 232.5, -0.31 213.69, 1.31 195.16 C2.93 176.63, 7.1 157.04, 13.92 139.8 C20.75 122.56, 30.77 106.61, 42.25 91.71 C53.73 76.81, 67.74 62.32, 82.8 50.4 C97.85 38.49, 112.63 28.35, 132.57 20.22 C152.51 12.09, 188.12 4.27, 202.43 1.61 C216.74 -1.05, 217.84 0.69, 218.44 4.25 M250.02 0.31 C268.8 -1.5, 289.88 7.71, 308.61 14.36 C327.35 21, 346.62 29.31, 362.44 40.19 C378.26 51.06, 391.32 65.05, 403.54 79.62 C415.76 94.2, 427.76 110.86, 435.76 127.62 C443.77 144.39, 448.34 161.83, 451.57 180.2 C454.8 198.57, 456.74 219.62, 455.13 237.86 C453.52 256.09, 448.99 272.51, 441.94 289.6 C434.89 306.68, 424.59 325.29, 412.85 340.39 C401.11 355.49, 386.44 368.37, 371.5 380.2 C356.57 392.04, 341.26 403.65, 323.25 411.4 C305.24 419.16, 282.94 424.03, 263.44 426.75 C243.93 429.46, 225.32 429.28, 206.21 427.7 C187.1 426.13, 167.46 423.86, 148.77 417.29 C130.08 410.72, 110.35 399.19, 94.09 388.31 C77.82 377.42, 63.72 366.35, 51.18 352.01 C38.64 337.66, 26.7 319.24, 18.85 302.22 C10.99 285.21, 7.23 268.08, 4.04 249.9 C0.84 231.72, -2.18 211.52, -0.34 193.14 C1.49 174.76, 8 157.04, 15.06 139.64 C22.11 122.24, 30.8 104.03, 42 88.72 C53.21 73.41, 66.81 59.18, 82.28 47.77 C97.75 36.36, 116.8 27.5, 134.83 20.25 C152.85 13, 170.91 7.36, 190.44 4.26 C209.97 1.15, 242.1 1.49, 252.02 1.61 C261.94 1.73, 250.67 1.45, 249.97 4.98" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11039.636043462997 1768.7341155959657) rotate(0 149.5979461669922 90)"><text x="149.5979461669922" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">DB (sharded tag</text><text x="149.5979461669922" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">and tagging</text><text x="149.5979461669922" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">table) + read</text><text x="149.5979461669922" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">replicas</text></g><g transform="translate(11493.38692856567 1582.5616031180834) rotate(0 110.87996673583984 135)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tags:</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag_ID,</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag_name,</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">createdAt,</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">usage_count</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g transform="translate(11794.81954059234 1576.8469290473731) rotate(0 133.73995971679688 135)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Taggings</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Product</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Entitiy_id (PK)</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tag_id (PK)</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">createdAt</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g transform="translate(12384.089696249419 1584.5869651458852) rotate(0 931.2656860351562 135)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">100M DAU</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1B reads to get entities by a tag. 10k per second = peak might be 10 times this so 100k </text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">they hit top k service 1B times too</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">size of tags table: i create 100K tags a day (10M people hit attach/detach) * 100 bytes = 10MB per day</text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">size of taggings table : most of 10M is attach, 10M*100 bytes =1 GB data per day</text></g><g stroke-linecap="round"><g transform="translate(10399.409588021961 1223.287141048102) rotate(0 319.5562965129657 238.48489522789532)"><path d="M0.96 -1.13 C107.41 78.39, 532.94 397.09, 639.11 476.56 M0 0.89 C106.33 80.66, 532.43 398.83, 638.61 478.1" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10399.409588021961 1223.287141048102) rotate(0 319.5562965129657 238.48489522789532)"><path d="M24.89 6.1 C15.03 5.28, 8.9 1, 0.96 -1.13 M24.89 6.1 C20.08 3.75, 13.38 2.79, 0.96 -1.13" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10399.409588021961 1223.287141048102) rotate(0 319.5562965129657 238.48489522789532)"><path d="M14.64 19.79 C8.27 14.31, 5.58 5.45, 0.96 -1.13 M14.64 19.79 C12.05 14.28, 7.66 10.23, 0.96 -1.13" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10399.409588021961 1223.287141048102) rotate(0 319.5562965129657 238.48489522789532)"><path d="M614.67 470.9 C620.76 474.52, 630.66 475.07, 638.61 478.1 M614.67 470.9 C620.79 471.49, 624.91 473.79, 638.61 478.1" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10399.409588021961 1223.287141048102) rotate(0 319.5562965129657 238.48489522789532)"><path d="M624.9 457.19 C627.51 465.49, 633.98 470.62, 638.61 478.1 M624.9 457.19 C628.81 460.95, 630.61 466.36, 638.61 478.1" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(10416.635341321315 1881.2698180097286) rotate(0 266.38540444585124 -1.26756383187967)"><path d="M-0.14 1.01 C88.99 0.43, 445.58 -2.72, 534.44 -3.55 M-1.67 0.5 C87.39 0.06, 444.94 -1.76, 533.87 -2.37" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10416.635341321315 1881.2698180097286) rotate(0 266.38540444585124 -1.26756383187967)"><path d="M23.28 -7.73 C18.56 -4.17, 9.32 -4.09, -0.14 1.01 M23.28 -7.73 C18.89 -4.88, 12.62 -3.4, -0.14 1.01" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10416.635341321315 1881.2698180097286) rotate(0 266.38540444585124 -1.26756383187967)"><path d="M23.42 9.37 C18.67 8.26, 9.39 3.66, -0.14 1.01 M23.42 9.37 C19.08 8.65, 12.79 6.55, -0.14 1.01" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10416.635341321315 1881.2698180097286) rotate(0 266.38540444585124 -1.26756383187967)"><path d="M510.43 6.32 C518.53 5.17, 522.1 0.48, 533.87 -2.37 M510.43 6.32 C515.91 5.29, 519.44 3.13, 533.87 -2.37" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10416.635341321315 1881.2698180097286) rotate(0 266.38540444585124 -1.26756383187967)"><path d="M510.33 -10.79 C518.45 -7.25, 522.05 -7.27, 533.87 -2.37 M510.33 -10.79 C515.75 -8.23, 519.29 -6.83, 533.87 -2.37" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(10389.992537983475 2629.6352736428307) rotate(0 327.5811439427498 -305.60524192653975)"><path d="M0.42 0.97 C109.75 -101.18, 546.96 -510.3, 655.98 -612.18 M-0.82 0.43 C108.45 -101.66, 546.49 -509.04, 655.56 -611.13" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10389.992537983475 2629.6352736428307) rotate(0 327.5811439427498 -305.60524192653975)"><path d="M11.74 -21.32 C10.1 -12.94, 3.54 -8.63, 0.42 0.97 M11.74 -21.32 C6.5 -12.5, 3.08 -4.9, 0.42 0.97" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10389.992537983475 2629.6352736428307) rotate(0 327.5811439427498 -305.60524192653975)"><path d="M23.42 -8.84 C18.22 -4.14, 8.16 -3.56, 0.42 0.97 M23.42 -8.84 C13.72 -4.65, 5.86 -1.8, 0.42 0.97" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10389.992537983475 2629.6352736428307) rotate(0 327.5811439427498 -305.60524192653975)"><path d="M644.21 -588.86 C649.09 -593.87, 649.3 -602.88, 655.56 -611.13 M644.21 -588.86 C647.53 -597.18, 652.74 -606.53, 655.56 -611.13" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10389.992537983475 2629.6352736428307) rotate(0 327.5811439427498 -305.60524192653975)"><path d="M632.55 -601.37 C640.98 -602.68, 644.68 -607.95, 655.56 -611.13 M632.55 -601.37 C640.32 -605.03, 649.97 -609.62, 655.56 -611.13" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(8002.09629365564 1999.1509159846682) rotate(0 306.93117376138616 -0.7432921161671402)"><path d="M0.22 -0.81 C102.7 -1.17, 512.63 -1, 614.98 -1.33 M-1.12 1.37 C101.25 0.63, 511.9 -2.35, 614.34 -2.86" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8002.09629365564 1999.1509159846682) rotate(0 306.93117376138616 -0.7432921161671402)"><path d="M23.71 -9.38 C15.2 -5.76, 11.24 -4.22, 0.22 -0.81 M23.71 -9.38 C17.42 -7.06, 11.05 -5.49, 0.22 -0.81" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8002.09629365564 1999.1509159846682) rotate(0 306.93117376138616 -0.7432921161671402)"><path d="M23.72 7.72 C15.09 6.1, 11.12 2.38, 0.22 -0.81 M23.72 7.72 C17.52 5.45, 11.15 2.41, 0.22 -0.81" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8002.09629365564 1999.1509159846682) rotate(0 306.93117376138616 -0.7432921161671402)"><path d="M590.9 5.84 C596.68 4.08, 607.12 0.31, 614.34 -2.86 M590.9 5.84 C597.33 3.96, 603.58 0.89, 614.34 -2.86" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(8002.09629365564 1999.1509159846682) rotate(0 306.93117376138616 -0.7432921161671402)"><path d="M590.79 -11.26 C596.72 -7.78, 607.19 -6.29, 614.34 -2.86 M590.79 -11.26 C597.15 -8.54, 603.44 -7.01, 614.34 -2.86" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(12508.438359121254 2001.1503225372144) rotate(0 1669.0670166015625 1327.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Non functionals reequiremeents;</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">READ LATENCY:</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1 low latency on fetching topK Tags&lt; 100ms</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. low latency. on fetching all the entities for a tag&lt;100</text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="256.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">WRITE LATENCY: </text><text x="0" y="301.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. ATTACH/DETACH should be under &lt;10ms</text><text x="0" y="346.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="391.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">SCALE:</text><text x="0" y="436.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4.100M DAU = 1B RPD fetching entities for a tag, 100M each person attaches one tag per day on avg=WPS,  </text><text x="0" y="481.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5. throughput: Read throughput: 10k RPS *2 = 20kRPS, Write throughput is 1kwPS. peak is *5, *10 = 100k RPS, 10k WPS</text><text x="0" y="526.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="571.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. HA, eventtual consistency, </text><text x="0" y="616.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. our topK will be consistent within 1 minute (attach/detach should change our top k in one minute)</text><text x="0" y="661.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">7. our attahc/detach should reflect on our posts within 1-2 seconds. i cannot cache more then 2 seconds. </text><text x="0" y="706.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"> </text><text x="0" y="751.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">8. Low latency on AutoCompleteSearch.&lt;100 ms </text><text x="0" y="796.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="841.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">API DESIGN:</text><text x="0" y="886.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1. PUT /entity/:product/:entityId/tags/:tagId</text><text x="0" y="931.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. DELETE /entity/:product/:entityId/tags/:tagId (what to do if posts are attached to this tag, we still let us delete it?) and wha tif tag has no attahced posts, do we delete the tag.</text><text x="0" y="976.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. GET /tags/:tagId/entities?cursor={} -&gt; entities[],  i should paginate here, cursor based pagination</text><text x="0" y="1021.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. GET /tags/popular -&gt; tags[]</text><text x="0" y="1066.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1111.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Deep dives:</text><text x="0" y="1156.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1 low latency on topK Tags</text><text x="0" y="1201.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">currently our system does this</text><text x="0" y="1246.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-select id, name</text><text x="0" y="1291.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">count(*) as posts_tagged</text><text x="0" y="1336.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">from taggings join tags</text><text x="0" y="1381.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">where tag_id=tagi_id</text><text x="0" y="1426.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">groupby tagid</text><text x="0" y="1471.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">order by tag_id</text><text x="0" y="1516.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LIMIT k;</text><text x="0" y="1561.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">If i add index on tag_id, it can help with joins, but we scan the whole table.</text><text x="0" y="1606.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1651.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">-&gt; i I' ll add usage count in tags table, and maiintain it per attach and detach</text><text x="0" y="1696.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">NOW I CAN QUERY TAGS TABLE DIRECTLY: do select tag_name from tags order by (usage_count, createdAT, tagId) (index on this) LIMIT K;</text><text x="0" y="1741.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1786.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. low latency on fetching entities for a tag: already very fast. </text><text x="0" y="1831.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1876.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">We can store both these query results in a cache with TTL of 1 minute and 2 seconds;</text><text x="0" y="1921.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="1966.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3. write latency is already very low.</text><text x="0" y="2011.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2056.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4, 5. RPS IS TAKEN CARE OF BY CACHE.  I DONT NEED REPLICAS ACTUALLY MY REDIS CAN HANDLE MOST OF THE TRAFFIC iif i have a high hit rate.</text><text x="0" y="2101.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">but I am not sure so i ll have read replicas anyways for high availability {failovers}.</text><text x="0" y="2146.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">--now if cache expires we do request coalescing, only one sqll query for top k hits the sql. at avg</text><text x="0" y="2191.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2236.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">WPS: so we need to shard our data. 10k WPS is borderline okay, to be safe lets shard into two-three shards (TO HANDLE THROUGHPUT, ofc based on size i might need more shards). </text><text x="0" y="2281.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2326.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6. 100M WPD * 500 = 50 B WPY *20Bytes = 1000B = 1TB of data an year. We have to shard for size as well.</text><text x="0" y="2371.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2416.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Now our topK: fetch top K from all the partitions (2-3 partitions), merge them and get top-k</text><text x="0" y="2461.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2506.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">//there might be hot key on popular tags (many people attaching/detaching #bugs)</text><text x="0" y="2551.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">we do hash(entityId) so it always end up on same shard,</text><text x="0" y="2596.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="2641.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4. since we sharded we can maintian top k in REDIS using sorted sets, </text></g><g stroke-linecap="round"><g transform="translate(10402.223953782093 2719.5476376510924) rotate(0 271.2925918611436 -105.59038905824855)"><path d="M-0.36 -1.08 C90.17 -36.11, 452.39 -175.18, 542.95 -210.18 M1.65 0.97 C92.09 -34.44, 452.11 -176.98, 542.25 -212.15" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10402.223953782093 2719.5476376510924) rotate(0 271.2925918611436 -105.59038905824855)"><path d="M18.49 -17.49 C11.45 -12.19, 8.47 -7.56, -0.36 -1.08 M18.49 -17.49 C13.31 -14.16, 8.59 -9.33, -0.36 -1.08" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10402.223953782093 2719.5476376510924) rotate(0 271.2925918611436 -105.59038905824855)"><path d="M24.63 -1.53 C15.88 -0.7, 11.19 -0.51, -0.36 -1.08 M24.63 -1.53 C17.87 -2.27, 11.6 -1.45, -0.36 -1.08" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10402.223953782093 2719.5476376510924) rotate(0 271.2925918611436 -105.59038905824855)"><path d="M523.52 -195.59 C526.93 -199.36, 534.41 -203.91, 542.25 -212.15 M523.52 -195.59 C527.7 -200.21, 532.43 -203.67, 542.25 -212.15" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(10402.223953782093 2719.5476376510924) rotate(0 271.2925918611436 -105.59038905824855)"><path d="M517.26 -211.51 C522.42 -210.82, 531.64 -210.94, 542.25 -212.15 M517.26 -211.51 C523.05 -212.07, 529.35 -211.52, 542.25 -212.15" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(10950.853192452756 2353.86760978424) rotate(0 144.25151376199028 131.9624329273829)"><path d="M45.68 35.74 C45.68 35.74, 45.68 35.74, 45.68 35.74 M45.68 35.74 C45.68 35.74, 45.68 35.74, 45.68 35.74 M3.96 108.12 C32.57 74.15, 65.73 39.11, 88.59 10.76 M3.96 108.12 C25.25 84.95, 44.27 62.91, 88.59 10.76 M2.91 133.71 C31.04 102.02, 56.99 72.68, 115.1 4.65 M2.91 133.71 C37.71 94.92, 70.85 55.73, 115.1 4.65 M3.84 157.04 C52.61 97.18, 104.81 37.72, 138.33 2.32 M3.84 157.04 C44.67 111.66, 86.1 63.89, 138.33 2.32 M10.01 174.33 C65.91 111.67, 121.64 46.78, 158.93 3.01 M10.01 174.33 C50.17 127.41, 90.95 79.13, 158.93 3.01 M16.18 191.62 C51.16 153.92, 84.16 114.25, 178.23 5.2 M16.18 191.62 C78.37 119.8, 141.23 46.73, 178.23 5.2 M25.63 205.13 C79.27 141.55, 133.26 79.23, 194.89 10.42 M25.63 205.13 C68.81 154.92, 112.51 105.85, 194.89 10.42 M36.39 217.14 C102.71 143.48, 167.37 66.25, 210.9 16.38 M36.39 217.14 C89.2 154.89, 142.41 93.43, 210.9 16.38 M47.16 229.14 C90.37 180.26, 131.23 133.47, 226.26 23.11 M47.16 229.14 C113.04 154.81, 178.77 80.04, 226.26 23.11 M60.54 238.13 C126.42 163.89, 188.28 90.44, 237.68 34.36 M60.54 238.13 C128.85 159.22, 198.79 79.5, 237.68 34.36 M74.59 246.36 C112.42 202.83, 149.35 158.4, 249.75 44.86 M74.59 246.36 C116.83 198.92, 158.37 150.17, 249.75 44.86 M89.29 253.84 C132.02 203.33, 176.32 153.74, 260.52 56.86 M89.29 253.84 C127.63 209.16, 166.74 163.94, 260.52 56.86 M106.61 258.3 C153.08 205.47, 202.43 150.04, 269.31 71.13 M106.61 258.3 C152.9 203.26, 200.67 150.13, 269.31 71.13 M124.59 262.01 C170.57 205.87, 216.91 151.28, 278.76 84.65 M124.59 262.01 C177.34 199.53, 231.69 138.69, 278.76 84.65 M144.54 263.45 C179.51 224.83, 211.47 184.41, 283.62 103.45 M144.54 263.45 C177.3 226.19, 209.42 189.46, 283.62 103.45 M167.77 261.11 C214.89 209.45, 258.81 156.31, 287.83 123 M167.77 261.11 C206.75 217.58, 244.38 174.83, 287.83 123 M194.28 255.01 C227.39 218.89, 256.45 180.7, 286.12 149.35 M194.28 255.01 C228.74 214.72, 263.61 175.56, 286.12 149.35 M235.22 232.3 C246.4 220.17, 253.45 211.54, 269.33 193.05 M235.22 232.3 C243.72 222.53, 251.33 212.92, 269.33 193.05" stroke="#ffffff" stroke-width="2" fill="none"></path><path d="M177.76 4.38 C193.01 5.56, 209.47 12.89, 222.54 20.47 C235.61 28.05, 246.6 38.64, 256.17 49.88 C265.75 61.11, 274.48 74.32, 279.99 87.86 C285.49 101.4, 289.11 117.03, 289.21 131.09 C289.31 145.16, 285.66 158.82, 280.6 172.24 C275.54 185.67, 268.31 200.03, 258.87 211.65 C249.44 223.27, 236.93 233.94, 223.97 241.96 C211.02 249.99, 196.16 256.09, 181.14 259.78 C166.13 263.48, 149.44 265.12, 133.88 264.13 C118.32 263.14, 102.21 259.57, 87.77 253.83 C73.33 248.1, 58.98 239.43, 47.26 229.74 C35.54 220.06, 24.83 208.26, 17.46 195.74 C10.09 183.23, 5.58 168.78, 3.04 154.65 C0.51 140.53, 0.08 124.99, 2.22 110.98 C4.36 96.97, 8.6 83.19, 15.9 70.59 C23.19 57.99, 34.48 45.32, 46 35.37 C57.53 25.41, 70.92 16.58, 85.04 10.86 C99.15 5.15, 112.01 1.23, 130.72 1.08 C149.42 0.92, 183.42 6.9, 197.25 9.92 C211.07 12.94, 214.56 17.23, 213.66 19.19 M161.03 -0.43 C176.28 -1.19, 194.21 6.09, 208.34 12.42 C222.47 18.75, 234.79 27.59, 245.8 37.57 C256.82 47.56, 267.25 59.57, 274.41 72.34 C281.58 85.11, 286.98 99.55, 288.79 114.18 C290.6 128.81, 288.68 146.02, 285.26 160.13 C281.83 174.23, 276.29 186.51, 268.24 198.81 C260.2 211.12, 248.76 224.53, 236.97 233.97 C225.18 243.41, 212.15 250.67, 197.51 255.44 C182.87 260.21, 165.04 261.98, 149.15 262.57 C133.25 263.16, 116.85 262.8, 102.14 259 C87.43 255.19, 73.47 247.96, 60.89 239.76 C48.31 231.55, 36.02 221.29, 26.67 209.75 C17.32 198.22, 8.99 184.42, 4.8 170.54 C0.6 156.66, 0.57 141.02, 1.52 126.48 C2.47 111.94, 5.08 96.36, 10.48 83.3 C15.87 70.24, 24.07 58.84, 33.89 48.11 C43.7 37.38, 56.1 26.48, 69.36 18.91 C82.63 11.33, 98.22 5.48, 113.46 2.66 C128.71 -0.16, 152.73 1.96, 160.84 1.98 C168.94 2.01, 162.14 0.57, 162.08 2.8" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11044.469495210462 2441.018511526796) rotate(0 50.63398742675781 45)"><text x="50.63398742675781" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Redis</text><text x="50.63398742675781" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Cache</text></g><g mask="url(#mask-n9pWM5KFxw2edw31fwyI0)" stroke-linecap="round"><g transform="translate(11192.119839421171 2073.2750938547106) rotate(0 -7.1110067920426445 145.5955198695483)"><path d="M0.45 -0.55 C8.22 27.07, 58.13 117.67, 47.52 166.17 C36.91 214.67, -44.76 269.64, -63.21 290.43 M-0.77 1.77 C6.82 29.04, 56.95 116.27, 46.92 164.6 C36.9 212.93, -42.49 270.47, -60.91 291.74" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11192.119839421171 2073.2750938547106) rotate(0 -7.1110067920426445 145.5955198695483)"><path d="M16.72 18.43 C9.63 12.51, 6.22 2.39, 0.45 -0.55 M16.72 18.43 C11.32 12.51, 6.48 6.33, 0.45 -0.55" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11192.119839421171 2073.2750938547106) rotate(0 -7.1110067920426445 145.5955198695483)"><path d="M0.71 24.45 C-0.4 16.21, 2.19 3.83, 0.45 -0.55 M0.71 24.45 C0.18 16.66, 0.13 8.67, 0.45 -0.55" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11192.119839421171 2073.2750938547106) rotate(0 -7.1110067920426445 145.5955198695483)"><path d="M-49.63 269.43 C-54.7 278.97, -56.25 284.33, -60.91 291.74 M-49.63 269.43 C-53.92 275.88, -57.27 282.09, -60.91 291.74" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(11192.119839421171 2073.2750938547106) rotate(0 -7.1110067920426445 145.5955198695483)"><path d="M-37.93 281.9 C-47.43 286.81, -53.36 287.49, -60.91 291.74 M-37.93 281.9 C-45.61 284.65, -52.47 287.12, -60.91 291.74" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask id="mask-n9pWM5KFxw2edw31fwyI0"><rect x="0" y="0" fill="#fff" width="11401.046122588825" height="2463.7012314656604"></rect><rect x="11202.274412909606" y="2215.8894560403496" fill="#000" width="73.36798095703125" height="45" opacity="1"></rect></mask><g transform="translate(11202.274412909606 2215.8894560403496) rotate(0 -17.26558028047748 2.9811576839092595)"><text x="36.683990478515625" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CDC</text></g><g transform="translate(11249.267191808747 2580.0931184854853) rotate(0 484.0738830566406 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">HA mode (1Redis Leader + 3 read replicas) for failovers</text></g><g transform="translate(11271.88854673671 2659.8639720707215) rotate(0 348.3538513183594 22.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">wait for atleast one replica to respond.</text></g><g transform="translate(8610.985023428366 3515.261942836296) rotate(0 0.00004999999964638846 0.00004999999873689376)" stroke="none"><path fill="#f08c00" d="M 6.28,-6.28 Q 6.28,-6.28 7.11,-5.11 7.95,-3.94 8.37,-2.57 8.80,-1.19 8.76,0.23 8.72,1.67 8.22,3.02 7.73,4.37 6.83,5.49 5.93,6.61 4.72,7.38 3.50,8.15 2.11,8.50 0.72,8.85 -0.71,8.73 -2.14,8.61 -3.46,8.05 -4.78,7.48 -5.85,6.52 -6.92,5.56 -7.63,4.31 -8.33,3.06 -8.60,1.65 -8.87,0.23 -8.68,-1.18 -8.49,-2.60 -7.85,-3.89 -7.21,-5.18 -6.19,-6.19 -5.18,-7.21 -3.89,-7.85 -2.60,-8.49 -1.18,-8.68 0.24,-8.87 1.65,-8.60 3.06,-8.33 4.31,-7.62 5.56,-6.92 6.52,-5.85 7.48,-4.78 8.05,-3.46 8.62,-2.14 8.73,-0.70 8.85,0.72 8.50,2.11 8.15,3.51 7.38,4.72 6.61,5.93 5.49,6.83 4.36,7.73 3.02,8.22 1.67,8.72 0.23,8.76 -1.20,8.80 -2.57,8.37 -3.94,7.95 -5.11,7.11 -6.28,6.27 -6.28,6.28 -6.28,6.28 -6.94,5.43 -7.60,4.59 -8.04,3.61 -8.48,2.64 -8.67,1.58 -8.86,0.53 -8.80,-0.53 -8.73,-1.60 -8.41,-2.62 -8.09,-3.64 -7.54,-4.56 -6.99,-5.47 -6.23,-6.23 -5.47,-6.99 -4.56,-7.54 -3.64,-8.10 -2.62,-8.41 -1.60,-8.73 -0.53,-8.80 0.53,-8.86 1.59,-8.67 2.64,-8.48 3.61,-8.04 4.59,-7.60 5.43,-6.94 6.28,-6.28 6.28,-6.28 L 6.28,-6.28 Z"></path></g><g transform="translate(8610.985023428366 3515.261942836296) rotate(0 0.00004999999964638846 0.00004999999873689376)" stroke="none"><path fill="#f08c00" d="M 6.28,-6.28 Q 6.28,-6.28 7.11,-5.11 7.95,-3.94 8.37,-2.57 8.80,-1.19 8.76,0.23 8.72,1.67 8.22,3.02 7.73,4.37 6.83,5.49 5.93,6.61 4.72,7.38 3.50,8.15 2.11,8.50 0.72,8.85 -0.71,8.73 -2.14,8.61 -3.46,8.05 -4.78,7.48 -5.85,6.52 -6.92,5.56 -7.63,4.31 -8.33,3.06 -8.60,1.65 -8.87,0.23 -8.68,-1.18 -8.49,-2.60 -7.85,-3.89 -7.21,-5.18 -6.19,-6.19 -5.18,-7.21 -3.89,-7.85 -2.60,-8.49 -1.18,-8.68 0.24,-8.87 1.65,-8.60 3.06,-8.33 4.31,-7.62 5.56,-6.92 6.52,-5.85 7.48,-4.78 8.05,-3.46 8.62,-2.14 8.73,-0.70 8.85,0.72 8.50,2.11 8.15,3.51 7.38,4.72 6.61,5.93 5.49,6.83 4.36,7.73 3.02,8.22 1.67,8.72 0.23,8.76 -1.20,8.80 -2.57,8.37 -3.94,7.95 -5.11,7.11 -6.28,6.27 -6.28,6.28 -6.28,6.28 -6.94,5.43 -7.60,4.59 -8.04,3.61 -8.48,2.64 -8.67,1.58 -8.86,0.53 -8.80,-0.53 -8.73,-1.60 -8.41,-2.62 -8.09,-3.64 -7.54,-4.56 -6.99,-5.47 -6.23,-6.23 -5.47,-6.99 -4.56,-7.54 -3.64,-8.10 -2.62,-8.41 -1.60,-8.73 -0.53,-8.80 0.53,-8.86 1.59,-8.67 2.64,-8.48 3.61,-8.04 4.59,-7.60 5.43,-6.94 6.28,-6.28 6.28,-6.28 L 6.28,-6.28 Z"></path></g><g transform="translate(8638.999126377872 3489.548681562257) rotate(0 984.6718139648438 112.5)"><text x="0" y="31.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tagginss will have tag_id, entity_id</text><text x="0" y="76.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">- get entities by a tag, we index by tag_id + create_date + entity_id</text><text x="0" y="121.71600000000001" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">and query like select * from taggins where tag_id = "" where timestamp&gt;cursor</text><text x="0" y="166.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="211.716" font-family="Excalifont, Xiaolai, sans-serif, Segoe UI Emoji" font-size="36px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2. get topK tags we group by tag_id our tags table adn calc row counts,, return top k, it is a scan. super slow.</text></g></svg>